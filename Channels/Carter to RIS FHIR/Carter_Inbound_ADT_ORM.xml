<?xml version="1.0" encoding="UTF-8"?><channel version="3.9.1">
  <id>75bb00fa-5ea6-471d-99c3-27b36d2caf31</id>
  <nextMetaDataId>6</nextMetaDataId>
  <name>Carter_Inbound_ADT_ORM</name>
  <description/>
  <revision>86</revision>
  <sourceConnector version="3.9.1">
    <metaDataId>0</metaDataId>
    <name>sourceConnector</name>
    <properties class="com.mirth.connect.connectors.file.FileReceiverProperties" version="3.9.1">
      <pluginProperties/>
      <pollConnectorProperties version="3.9.1">
        <pollingType>INTERVAL</pollingType>
        <pollOnStart>false</pollOnStart>
        <pollingFrequency>5000</pollingFrequency>
        <pollingHour>0</pollingHour>
        <pollingMinute>0</pollingMinute>
        <cronJobs/>
        <pollConnectorPropertiesAdvanced>
          <weekly>true</weekly>
          <inactiveDays>
            <boolean>false</boolean>
            <boolean>false</boolean>
            <boolean>false</boolean>
            <boolean>false</boolean>
            <boolean>false</boolean>
            <boolean>false</boolean>
            <boolean>false</boolean>
            <boolean>false</boolean>
          </inactiveDays>
          <dayOfMonth>1</dayOfMonth>
          <allDay>true</allDay>
          <startingHour>8</startingHour>
          <startingMinute>0</startingMinute>
          <endingHour>17</endingHour>
          <endingMinute>0</endingMinute>
        </pollConnectorPropertiesAdvanced>
      </pollConnectorProperties>
      <sourceConnectorProperties version="3.9.1">
        <responseVariable>None</responseVariable>
        <respondAfterProcessing>true</respondAfterProcessing>
        <processBatch>false</processBatch>
        <firstResponse>false</firstResponse>
        <processingThreads>1</processingThreads>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
        <queueBufferSize>1000</queueBufferSize>
      </sourceConnectorProperties>
      <scheme>FILE</scheme>
      <host>D:/Mirth_testing/Carter ADT ORM/ADT</host>
      <fileFilter>*.hl7</fileFilter>
      <regex>false</regex>
      <directoryRecursion>false</directoryRecursion>
      <ignoreDot>true</ignoreDot>
      <anonymous>true</anonymous>
      <username>anonymous</username>
      <password>anonymous</password>
      <timeout>10000</timeout>
      <secure>true</secure>
      <passive>true</passive>
      <validateConnection>true</validateConnection>
      <afterProcessingAction>MOVE</afterProcessingAction>
      <moveToDirectory>D:/Mirth_testing/Carter ADT ORM/ADT/Processed</moveToDirectory>
      <moveToFileName>${channelName}-${SYSTIME}</moveToFileName>
      <errorReadingAction>MOVE</errorReadingAction>
      <errorResponseAction>AFTER_PROCESSING</errorResponseAction>
      <errorMoveToDirectory>D:/Mirth_testing/Carter ADT ORM/ADT/Error</errorMoveToDirectory>
      <errorMoveToFileName>${channelName}-${SYSTIME}</errorMoveToFileName>
      <checkFileAge>true</checkFileAge>
      <fileAge>1000</fileAge>
      <fileSizeMinimum>0</fileSizeMinimum>
      <fileSizeMaximum/>
      <ignoreFileSizeMaximum>true</ignoreFileSizeMaximum>
      <sortBy>date</sortBy>
      <binary>false</binary>
      <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
    </properties>
    <transformer version="3.9.1">
      <elements>
        <com.mirth.connect.plugins.mapper.MapperStep version="3.9.1">
          <name>Patient_FamilyName</name>
          <sequenceNumber>0</sequenceNumber>
          <enabled>true</enabled>
          <variable>Patient_FamilyName</variable>
          <mapping>msg['PID']['PID.5']['PID.5.1'].toString()</mapping>
          <defaultValue/>
          <replacements/>
          <scope>CHANNEL</scope>
        </com.mirth.connect.plugins.mapper.MapperStep>
        <com.mirth.connect.plugins.mapper.MapperStep version="3.9.1">
          <name>Patient_DOB</name>
          <sequenceNumber>1</sequenceNumber>
          <enabled>true</enabled>
          <variable>Patient_DOB</variable>
          <mapping>DateUtil.convertDate('yyyyMMdd', 'yyyy-MM-dd',msg['PID']['PID.7']['PID.7.1'].toString());</mapping>
          <defaultValue/>
          <replacements/>
          <scope>CHANNEL</scope>
        </com.mirth.connect.plugins.mapper.MapperStep>
      </elements>
      <inboundTemplate encoding="base64">TVNIfF5+XCZ8TUVTQV9BRFR8WFlaX0FETUlUVElOR3xpRld8WllYX0hPU1BJVEFMfHx8QURUXkEw
NHwxMDMxMDJ8UHwyLjR8fHx8fHx8fApFVk58fDIwMDAwNzAxMDgwMHx8fHwyMDAwMDcwMTA4MDAK
UElEfHx8NTgzMjk1Xl5eQURUMXx8RE9FXkpBTkV8fDE5NjEwNjE1fE0tfHwyMTA2LTN8MTIzIE1B
SU4gU1RSRUVUXl5HUkVFTlNCT1JPXk5DXjI3NDAxLTEwMjB8R0x8KDkxOSkzNzktMTIxMnwoOTE5
KTI3MS0zNDM0fig5MTkpMjc3LTMxMTR8fFN8fFBBVElEMTIzNDUwMDFeMl5NMTB8MTIzNDU2Nzg5
fDktODc2NTReTkMKTksxfDF8QkFURVNeUk9OQUxEXkx8U1BPfHx8fHwyMDAxMTEwNQpQVjF8fEV8
fHx8fHw1MTAxXk5FTExeRlJFREVSSUNLXlBeXkRSfHx8fHx8fHx8fHxWMTI5NV5eXkFEVDF8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8MjAwMDA3MDEwODAwfHx8fHx8fHwKUFYyfHx8XkFCRE9NSU5B
TCBQQUlOCk9CWHwxfEhEfFNSIEluc3RhbmNlIFVJRHx8MS4xMjM0NTYuMi4yMDAwLjMxLjIuMXx8
fHx8fEZ8fHx8fHwKQUwxfDF8fF5QRU5JQ0lMTElOfHxQUk9EVUNFUyBISVZFU35SQVNICkFMMXwy
fHxeQ0FUIERBTkRFUgpERzF8MDAxfEk5fDE1NTB8TUFMIE5FTyBMSVZFUiwgUFJJTUFSWXwxOTg4
MDUwMTEwMzAwNXxGfHwKUFIxfDIyMzR8TTExfDExMV5DT0RFMTUxfENPTU1PTiBQUk9DRURVUkVT
fDE5ODgwOTA4MTEyMwpST0x8NDVeUkVDT1JERVJeUk9MRSBNQVNURVIgTElTVHxBRHxDUHxLQVRF
XlNNSVRIXkVMTEVOfDE5OTUwNTAxMTIwMQpHVDF8MTEyMnwxNTE5fEJJTExeR0FURVNeQQpJTjF8
MDAxfEEzNTd8MTIzNHxCQ01EfHx8fHwxMzI5ODcKSU4yfElEMTU1MTAwMXxTU04xMjM0NTY3OA==
</inboundTemplate>
      <outboundTemplate encoding="base64"/>
      <inboundDataType>HL7V2</inboundDataType>
      <outboundDataType>HL7V2</outboundDataType>
      <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
        <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
          <handleRepetitions>true</handleRepetitions>
          <handleSubcomponents>true</handleSubcomponents>
          <useStrictParser>false</useStrictParser>
          <useStrictValidation>false</useStrictValidation>
          <stripNamespaces>true</stripNamespaces>
          <segmentDelimiter>\r</segmentDelimiter>
          <convertLineBreaks>true</convertLineBreaks>
        </serializationProperties>
        <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
          <useStrictParser>false</useStrictParser>
          <useStrictValidation>false</useStrictValidation>
          <segmentDelimiter>\r</segmentDelimiter>
        </deserializationProperties>
        <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
          <splitType>MSH_Segment</splitType>
          <batchScript/>
        </batchProperties>
        <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
          <segmentDelimiter>\r</segmentDelimiter>
          <successfulACKCode>AA</successfulACKCode>
          <successfulACKMessage/>
          <errorACKCode>AE</errorACKCode>
          <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
          <rejectedACKCode>AR</rejectedACKCode>
          <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
          <msh15ACKAccept>false</msh15ACKAccept>
          <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
        </responseGenerationProperties>
        <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
          <successfulACKCode>AA,CA</successfulACKCode>
          <errorACKCode>AE,CE</errorACKCode>
          <rejectedACKCode>AR,CR</rejectedACKCode>
          <validateMessageControlId>true</validateMessageControlId>
          <originalMessageControlId>Destination_Encoded</originalMessageControlId>
          <originalIdMapVariable/>
        </responseValidationProperties>
      </inboundProperties>
      <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
        <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
          <handleRepetitions>true</handleRepetitions>
          <handleSubcomponents>true</handleSubcomponents>
          <useStrictParser>false</useStrictParser>
          <useStrictValidation>false</useStrictValidation>
          <stripNamespaces>true</stripNamespaces>
          <segmentDelimiter>\r</segmentDelimiter>
          <convertLineBreaks>true</convertLineBreaks>
        </serializationProperties>
        <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
          <useStrictParser>false</useStrictParser>
          <useStrictValidation>false</useStrictValidation>
          <segmentDelimiter>\r</segmentDelimiter>
        </deserializationProperties>
        <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
          <splitType>MSH_Segment</splitType>
          <batchScript/>
        </batchProperties>
        <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
          <segmentDelimiter>\r</segmentDelimiter>
          <successfulACKCode>AA</successfulACKCode>
          <successfulACKMessage/>
          <errorACKCode>AE</errorACKCode>
          <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
          <rejectedACKCode>AR</rejectedACKCode>
          <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
          <msh15ACKAccept>false</msh15ACKAccept>
          <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
        </responseGenerationProperties>
        <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
          <successfulACKCode>AA,CA</successfulACKCode>
          <errorACKCode>AE,CE</errorACKCode>
          <rejectedACKCode>AR,CR</rejectedACKCode>
          <validateMessageControlId>true</validateMessageControlId>
          <originalMessageControlId>Destination_Encoded</originalMessageControlId>
          <originalIdMapVariable/>
        </responseValidationProperties>
      </outboundProperties>
    </transformer>
    <filter version="3.9.1">
      <elements/>
    </filter>
    <transportName>File Reader</transportName>
    <mode>SOURCE</mode>
    <enabled>true</enabled>
    <waitForPrevious>true</waitForPrevious>
  </sourceConnector>
  <destinationConnectors>
    <connector version="3.9.1">
      <metaDataId>1</metaDataId>
      <name>Query for existence of patient</name>
      <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.9.1">
        <pluginProperties/>
        <destinationConnectorProperties version="3.9.1">
          <queueEnabled>false</queueEnabled>
          <sendFirst>false</sendFirst>
          <retryIntervalMillis>10000</retryIntervalMillis>
          <regenerateTemplate>false</regenerateTemplate>
          <retryCount>0</retryCount>
          <rotate>false</rotate>
          <includeFilterTransformer>false</includeFilterTransformer>
          <threadCount>1</threadCount>
          <threadAssignmentVariable/>
          <validateResponse>false</validateResponse>
          <resourceIds class="linked-hash-map">
            <entry>
              <string>Default Resource</string>
              <string>[Default Resource]</string>
            </entry>
          </resourceIds>
          <queueBufferSize>1000</queueBufferSize>
          <reattachAttachments>true</reattachAttachments>
        </destinationConnectorProperties>
        <host>http://hapi.fhir.org/baseR4/Patient?birthdate=${Patient_DOB}&amp;family=${Patient_FamilyName}&amp;_pretty=true</host>
        <useProxyServer>false</useProxyServer>
        <proxyAddress/>
        <proxyPort/>
        <method>get</method>
        <headers class="linked-hash-map"/>
        <parameters class="linked-hash-map"/>
        <useHeadersVariable>false</useHeadersVariable>
        <headersVariable/>
        <useParametersVariable>false</useParametersVariable>
        <parametersVariable/>
        <responseXmlBody>false</responseXmlBody>
        <responseParseMultipart>true</responseParseMultipart>
        <responseIncludeMetadata>false</responseIncludeMetadata>
        <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
        <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
        <multipart>false</multipart>
        <useAuthentication>false</useAuthentication>
        <authenticationType>Basic</authenticationType>
        <usePreemptiveAuthentication>false</usePreemptiveAuthentication>
        <username/>
        <password/>
        <content/>
        <contentType>application/json+fhir</contentType>
        <dataTypeBinary>false</dataTypeBinary>
        <charset>UTF-8</charset>
        <socketTimeout>30000</socketTimeout>
      </properties>
      <transformer version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.mapper.MapperStep version="3.9.1">
            <name>identifier</name>
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <variable>identifier</variable>
            <mapping>msg['PID']['PID.3']['PID.3.1'].toString()</mapping>
            <defaultValue/>
            <replacements/>
            <scope>CHANNEL</scope>
          </com.mirth.connect.plugins.mapper.MapperStep>
          <com.mirth.connect.plugins.mapper.MapperStep version="3.9.1">
            <name>family</name>
            <sequenceNumber>1</sequenceNumber>
            <enabled>true</enabled>
            <variable>family</variable>
            <mapping>msg['PID']['PID.5']['PID.5.1'].toString()</mapping>
            <defaultValue/>
            <replacements/>
            <scope>CHANNEL</scope>
          </com.mirth.connect.plugins.mapper.MapperStep>
          <com.mirth.connect.plugins.mapper.MapperStep version="3.9.1">
            <name>birthdate</name>
            <sequenceNumber>2</sequenceNumber>
            <enabled>true</enabled>
            <variable>birthdate</variable>
            <mapping>msg['PID']['PID.7']['PID.7.1'].toString()</mapping>
            <defaultValue/>
            <replacements/>
            <scope>CHANNEL</scope>
          </com.mirth.connect.plugins.mapper.MapperStep>
        </elements>
        <inboundTemplate encoding="base64">TVNIfF5+XCZ8TUVTQV9BRFR8WFlaX0FETUlUVElOR3xpRld8WllYX0hPU1BJVEFMfHx8QURUXkEw
NHwxMDMxMDJ8UHwyLjR8fHx8fHx8fApFVk58fDIwMDAwNzAxMDgwMHx8fHwyMDAwMDcwMTA4MDAK
UElEfHx8NTgzMjk1Xl5eQURUMXx8RE9FXkpBTkV8fDE5NjEwNjE1fE0tfHwyMTA2LTN8MTIzIE1B
SU4gU1RSRUVUXl5HUkVFTlNCT1JPXk5DXjI3NDAxLTEwMjB8R0x8KDkxOSkzNzktMTIxMnwoOTE5
KTI3MS0zNDM0fig5MTkpMjc3LTMxMTR8fFN8fFBBVElEMTIzNDUwMDFeMl5NMTB8MTIzNDU2Nzg5
fDktODc2NTReTkMKTksxfDF8QkFURVNeUk9OQUxEXkx8U1BPfHx8fHwyMDAxMTEwNQpQVjF8fEV8
fHx8fHw1MTAxXk5FTExeRlJFREVSSUNLXlBeXkRSfHx8fHx8fHx8fHxWMTI5NV5eXkFEVDF8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8MjAwMDA3MDEwODAwfHx8fHx8fHwKUFYyfHx8XkFCRE9NSU5B
TCBQQUlOCk9CWHwxfEhEfFNSIEluc3RhbmNlIFVJRHx8MS4xMjM0NTYuMi4yMDAwLjMxLjIuMXx8
fHx8fEZ8fHx8fHwKQUwxfDF8fF5QRU5JQ0lMTElOfHxQUk9EVUNFUyBISVZFU35SQVNICkFMMXwy
fHxeQ0FUIERBTkRFUgpERzF8MDAxfEk5fDE1NTB8TUFMIE5FTyBMSVZFUiwgUFJJTUFSWXwxOTg4
MDUwMTEwMzAwNXxGfHwKUFIxfDIyMzR8TTExfDExMV5DT0RFMTUxfENPTU1PTiBQUk9DRURVUkVT
fDE5ODgwOTA4MTEyMwpST0x8NDVeUkVDT1JERVJeUk9MRSBNQVNURVIgTElTVHxBRHxDUHxLQVRF
XlNNSVRIXkVMTEVOfDE5OTUwNTAxMTIwMQpHVDF8MTEyMnwxNTE5fEJJTExeR0FURVNeQQpJTjF8
MDAxfEEzNTd8MTIzNHxCQ01EfHx8fHwxMzI5ODcKSU4yfElEMTU1MTAwMXxTU04xMjM0NTY3OA==
</inboundTemplate>
        <outboundTemplate encoding="base64"/>
        <inboundDataType>HL7V2</inboundDataType>
        <outboundDataType>JSON</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="3.9.1">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="3.9.1">
            <splitType>JavaScript</splitType>
            <batchScript/>
          </batchProperties>
        </outboundProperties>
      </transformer>
      <responseTransformer version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.9.1">
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <script>var Len = getArrayOrXmlLength(msg['entry'])
logger.info("Len --&gt;" +Len);

//logger.info("Status -- &gt;"+response.getMessage());



if (Len == 1)
{
	channelMap.put('OldPatient','1');
	logger.info("loc --&gt;"+msg['total']);
	
	if (msg['total'] = 0)
			{
			var locationHistory = msg['entry'][0]['response']['location'];
			var resourceID = locationHistory.substring(8,16);
			channelMap.put("resourceID",resourceID);
			}
	else{ 
		var url = msg['entry'][0]['fullUrl'];
		var resourceID = url.slice(-8);
		channelMap.put("resourceID",resourceID);
		}
	
	logger.info("Old Patient")
	}
else if (Len &lt; '1')
{
	channelMap.put('NewPatient','1')
	logger.info("New Patient")
	}</script>
          </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        </elements>
        <inboundTemplate encoding="base64">ewogICJyZXNvdXJjZVR5cGUiIDogIkJ1bmRsZSIsCiAgImlkIiA6ICJidW5kbGUtdHJhbnNhY3Rp
b24iLAogICJtZXRhIiA6IHsKICAgICJsYXN0VXBkYXRlZCIgOiAiMjAxNC0wOC0xOFQwMTo0Mzoz
MFoiCiAgfSwKICAidHlwZSIgOiAidHJhbnNhY3Rpb24iLAogICJ0b3RhbCIgOiAxLAogICJlbnRy
eSIgOiBbewogICAgImZ1bGxVcmwiIDogInVybjp1dWlkOjYxZWJlMzU5LWJmZGMtNDYxMy04YmYy
LWM1ZTMwMDk0NWYwYSIsCiAgICAicmVzb3VyY2UiIDogewogICAgICAicmVzb3VyY2VUeXBlIiA6
ICJQYXRpZW50IiwKICAgICAgInRleHQiIDogewogICAgICAgICJzdGF0dXMiIDogImdlbmVyYXRl
ZCIsCiAgICAgICAgImRpdiIgOiAiPGRpdiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkv
eGh0bWxcIj5Tb21lIG5hcnJhdGl2ZTwvZGl2PiIKICAgICAgfSwKICAgICAgImFjdGl2ZSIgOiB0
cnVlLAogICAgICAibmFtZSIgOiBbewogICAgICAgICJ1c2UiIDogIm9mZmljaWFsIiwKICAgICAg
ICAiZmFtaWx5IiA6ICJDaGFsbWVycyIsCiAgICAgICAgImdpdmVuIiA6IFsiUGV0ZXIiLAogICAg
ICAgICJKYW1lcyJdCiAgICAgIH1dLAogICAgICAiZ2VuZGVyIiA6ICJtYWxlIiwKICAgICAgImJp
cnRoRGF0ZSIgOiAiMTk3NC0xMi0yNSIKICAgIH0sCiAgICAicmVxdWVzdCIgOiB7CiAgICAgICJt
ZXRob2QiIDogIlBPU1QiLAogICAgICAidXJsIiA6ICJQYXRpZW50IgogICAgfQogIH0sCiAgewog
ICAgImZ1bGxVcmwiIDogInVybjp1dWlkOjg4ZjE1MWMwLWE5NTQtNDY4YS04OGJkLTVhZTE1YzA4
ZTA1OSIsCiAgICAicmVzb3VyY2UiIDogewogICAgICAicmVzb3VyY2VUeXBlIiA6ICJQYXRpZW50
IiwKICAgICAgInRleHQiIDogewogICAgICAgICJzdGF0dXMiIDogImdlbmVyYXRlZCIsCiAgICAg
ICAgImRpdiIgOiAiPGRpdiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIj5T
b21lIG5hcnJhdGl2ZTwvZGl2PiIKICAgICAgfSwKICAgICAgImlkZW50aWZpZXIiIDogW3sKICAg
ICAgICAic3lzdGVtIiA6ICJodHRwOi9leGFtcGxlLm9yZy9maGlyL2lkcyIsCiAgICAgICAgInZh
bHVlIiA6ICIyMzQyMzQiCiAgICAgIH1dLAogICAgICAiYWN0aXZlIiA6IHRydWUsCiAgICAgICJu
YW1lIiA6IFt7CiAgICAgICAgInVzZSIgOiAib2ZmaWNpYWwiLAogICAgICAgICJmYW1pbHkiIDog
IkNoYWxtZXJzIiwKICAgICAgICAiZ2l2ZW4iIDogWyJQZXRlciIsCiAgICAgICAgIkphbWVzIl0K
ICAgICAgfV0sCiAgICAgICJnZW5kZXIiIDogIm1hbGUiLAogICAgICAiYmlydGhEYXRlIiA6ICIx
OTc0LTEyLTI1IgogICAgfSwKICAgICJyZXF1ZXN0IiA6IHsKICAgICAgIm1ldGhvZCIgOiAiUE9T
VCIsCiAgICAgICJ1cmwiIDogIlBhdGllbnQiLAogICAgICAiaWZOb25lRXhpc3QiIDogImlkZW50
aWZpZXI9aHR0cDovZXhhbXBsZS5vcmcvZmhpci9pZHN8MjM0MjM0IgogICAgfQogIH0sCiAgewog
ICAgImZ1bGxVcmwiIDogImh0dHA6Ly9leGFtcGxlLm9yZy9maGlyL1BhdGllbnQvMTIzIiwKICAg
ICJyZXNvdXJjZSIgOiB7CiAgICAgICJyZXNvdXJjZVR5cGUiIDogIlBhdGllbnQiLAogICAgICAi
aWQiIDogIjEyMyIsCiAgICAgICJ0ZXh0IiA6IHsKICAgICAgICAic3RhdHVzIiA6ICJnZW5lcmF0
ZWQiLAogICAgICAgICJkaXYiIDogIjxkaXYgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5
L3hodG1sXCI+U29tZSBuYXJyYXRpdmU8L2Rpdj4iCiAgICAgIH0sCiAgICAgICJhY3RpdmUiIDog
dHJ1ZSwKICAgICAgIm5hbWUiIDogW3sKICAgICAgICAidXNlIiA6ICJvZmZpY2lhbCIsCiAgICAg
ICAgImZhbWlseSIgOiAiQ2hhbG1lcnMiLAogICAgICAgICJnaXZlbiIgOiBbIlBldGVyIiwKICAg
ICAgICAiSmFtZXMiXQogICAgICB9XSwKICAgICAgImdlbmRlciIgOiAibWFsZSIsCiAgICAgICJi
aXJ0aERhdGUiIDogIjE5NzQtMTItMjUiCiAgICB9LAogICAgInJlcXVlc3QiIDogewogICAgICAi
bWV0aG9kIiA6ICJQVVQiLAogICAgICAidXJsIiA6ICJQYXRpZW50LzEyMyIKICAgIH0KICB9LAog
IHsKICAgICJmdWxsVXJsIiA6ICJ1cm46dXVpZDo3NDg5MWFmYy1lZDUyLTQyYTItYmNkNy1mMTNk
OWI2MGYwOTYiLAogICAgInJlc291cmNlIiA6IHsKICAgICAgInJlc291cmNlVHlwZSIgOiAiUGF0
aWVudCIsCiAgICAgICJ0ZXh0IiA6IHsKICAgICAgICAic3RhdHVzIiA6ICJnZW5lcmF0ZWQiLAog
ICAgICAgICJkaXYiIDogIjxkaXYgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1s
XCI+U29tZSBuYXJyYXRpdmU8L2Rpdj4iCiAgICAgIH0sCiAgICAgICJpZGVudGlmaWVyIiA6IFt7
CiAgICAgICAgInN5c3RlbSIgOiAiaHR0cDovZXhhbXBsZS5vcmcvZmhpci9pZHMiLAogICAgICAg
ICJ2YWx1ZSIgOiAiNDU2NDU2IgogICAgICB9XSwKICAgICAgImFjdGl2ZSIgOiB0cnVlLAogICAg
ICAibmFtZSIgOiBbewogICAgICAgICJ1c2UiIDogIm9mZmljaWFsIiwKICAgICAgICAiZmFtaWx5
IiA6ICJDaGFsbWVycyIsCiAgICAgICAgImdpdmVuIiA6IFsiUGV0ZXIiLAogICAgICAgICJKYW1l
cyJdCiAgICAgIH1dLAogICAgICAiZ2VuZGVyIiA6ICJtYWxlIiwKICAgICAgImJpcnRoRGF0ZSIg
OiAiMTk3NC0xMi0yNSIKICAgIH0sCiAgICAicmVxdWVzdCIgOiB7CiAgICAgICJtZXRob2QiIDog
IlBVVCIsCiAgICAgICJ1cmwiIDogIlBhdGllbnQ/aWRlbnRpZmllcj1odHRwOi9leGFtcGxlLm9y
Zy9maGlyL2lkc3w0NTY0NTYiCiAgICB9CiAgfSwKICB7CiAgICAiZnVsbFVybCIgOiAiaHR0cDov
L2V4YW1wbGUub3JnL2ZoaXIvUGF0aWVudC8xMjNhIiwKICAgICJyZXNvdXJjZSIgOiB7CiAgICAg
ICJyZXNvdXJjZVR5cGUiIDogIlBhdGllbnQiLAogICAgICAiaWQiIDogIjEyM2EiLAogICAgICAi
dGV4dCIgOiB7CiAgICAgICAgInN0YXR1cyIgOiAiZ2VuZXJhdGVkIiwKICAgICAgICAiZGl2IiA6
ICI8ZGl2IHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiPlNvbWUgbmFycmF0
aXZlPC9kaXY+IgogICAgICB9LAogICAgICAiYWN0aXZlIiA6IHRydWUsCiAgICAgICJuYW1lIiA6
IFt7CiAgICAgICAgInVzZSIgOiAib2ZmaWNpYWwiLAogICAgICAgICJmYW1pbHkiIDogIkNoYWxt
ZXJzIiwKICAgICAgICAiZ2l2ZW4iIDogWyJQZXRlciIsCiAgICAgICAgIkphbWVzIl0KICAgICAg
fV0sCiAgICAgICJnZW5kZXIiIDogIm1hbGUiLAogICAgICAiYmlydGhEYXRlIiA6ICIxOTc0LTEy
LTI1IgogICAgfSwKICAgICJyZXF1ZXN0IiA6IHsKICAgICAgIm1ldGhvZCIgOiAiUFVUIiwKICAg
ICAgInVybCIgOiAiUGF0aWVudC8xMjNhIiwKICAgICAgImlmTWF0Y2giIDogIlcvXCIyXCIiCiAg
ICB9CiAgfSwKICB7CiAgICAicmVxdWVzdCIgOiB7CiAgICAgICJtZXRob2QiIDogIkRFTEVURSIs
CiAgICAgICJ1cmwiIDogIlBhdGllbnQvMjM0IgogICAgfQogIH0sCiAgewogICAgInJlcXVlc3Qi
IDogewogICAgICAibWV0aG9kIiA6ICJERUxFVEUiLAogICAgICAidXJsIiA6ICJQYXRpZW50P2lk
ZW50aWZpZXI9MTIzNDU2IgogICAgfQogIH0sCiAgewogICAgImZ1bGxVcmwiIDogInVybjp1dWlk
Ojc5Mzc4Y2I4LThmNTgtNDhlOC1hNWU4LTYwYWMyNzU1YjY3NCIsCiAgICAicmVzb3VyY2UiIDog
ewogICAgICAicmVzb3VyY2VUeXBlIiA6ICJQYXJhbWV0ZXJzIiwKICAgICAgInBhcmFtZXRlciIg
OiBbewogICAgICAgICJuYW1lIiA6ICJjb2RpbmciLAogICAgICAgICJ2YWx1ZUNvZGluZyIgOiB7
CiAgICAgICAgICAic3lzdGVtIiA6ICJodHRwOi8vbG9pbmMub3JnIiwKICAgICAgICAgICJjb2Rl
IiA6ICIxOTYzLTgiCiAgICAgICAgfQogICAgICB9XQogICAgfSwKICAgICJyZXF1ZXN0IiA6IHsK
ICAgICAgIm1ldGhvZCIgOiAiUE9TVCIsCiAgICAgICJ1cmwiIDogImh0dHA6Ly9obDcub3JnL2Zo
aXIvVmFsdWVTZXQvJGxvb2t1cCIKICAgIH0KICB9LAogIHsKICAgICJyZXF1ZXN0IiA6IHsKICAg
ICAgIm1ldGhvZCIgOiAiR0VUIiwKICAgICAgInVybCIgOiAiUGF0aWVudD9uYW1lPXBldGVyIgog
ICAgfQogIH0sCiAgewogICAgInJlcXVlc3QiIDogewogICAgICAibWV0aG9kIiA6ICJHRVQiLAog
ICAgICAidXJsIiA6ICJQYXRpZW50LzEyMzM0IiwKICAgICAgImlmTm9uZU1hdGNoIiA6ICJXL1wi
NFwiIiwKICAgICAgImlmTW9kaWZpZWRTaW5jZSIgOiAiMjAxNS0wOC0zMVQwODoxNDozMysxMDow
MCIKICAgIH0KICB9XQp9</inboundTemplate>
        <outboundTemplate encoding="base64"/>
        <inboundDataType>JSON</inboundDataType>
        <outboundDataType>JSON</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="3.9.1">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="3.9.1">
            <splitType>JavaScript</splitType>
            <batchScript/>
          </batchProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="3.9.1">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="3.9.1">
            <splitType>JavaScript</splitType>
            <batchScript/>
          </batchProperties>
        </outboundProperties>
      </responseTransformer>
      <filter version="3.9.1">
        <elements/>
      </filter>
      <transportName>HTTP Sender</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
      <waitForPrevious>true</waitForPrevious>
    </connector>
    <connector version="3.9.1">
      <metaDataId>2</metaDataId>
      <name>New Patient Creation</name>
      <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.9.1">
        <pluginProperties/>
        <destinationConnectorProperties version="3.9.1">
          <queueEnabled>false</queueEnabled>
          <sendFirst>false</sendFirst>
          <retryIntervalMillis>10000</retryIntervalMillis>
          <regenerateTemplate>false</regenerateTemplate>
          <retryCount>0</retryCount>
          <rotate>false</rotate>
          <includeFilterTransformer>false</includeFilterTransformer>
          <threadCount>1</threadCount>
          <threadAssignmentVariable/>
          <validateResponse>false</validateResponse>
          <resourceIds class="linked-hash-map">
            <entry>
              <string>Default Resource</string>
              <string>[Default Resource]</string>
            </entry>
          </resourceIds>
          <queueBufferSize>1000</queueBufferSize>
          <reattachAttachments>true</reattachAttachments>
        </destinationConnectorProperties>
        <host>http://hapi.fhir.org/baseR4/</host>
        <useProxyServer>false</useProxyServer>
        <proxyAddress/>
        <proxyPort/>
        <method>post</method>
        <headers class="linked-hash-map"/>
        <parameters class="linked-hash-map"/>
        <useHeadersVariable>false</useHeadersVariable>
        <headersVariable/>
        <useParametersVariable>false</useParametersVariable>
        <parametersVariable/>
        <responseXmlBody>false</responseXmlBody>
        <responseParseMultipart>true</responseParseMultipart>
        <responseIncludeMetadata>false</responseIncludeMetadata>
        <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
        <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
        <multipart>false</multipart>
        <useAuthentication>false</useAuthentication>
        <authenticationType>Basic</authenticationType>
        <usePreemptiveAuthentication>false</usePreemptiveAuthentication>
        <username/>
        <password/>
        <content>${patient_resource}</content>
        <contentType>application/json</contentType>
        <dataTypeBinary>false</dataTypeBinary>
        <charset>UTF-8</charset>
        <socketTimeout>30000</socketTimeout>
      </properties>
      <transformer version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.9.1">
            <name>JSON Patient Resource</name>
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <script>tmp['entry'][0]['resource']['identifier'] = msg['PID']['PID.3']['PID.3.1'].toString();

tmp['entry'][0]['resource']['name'][0]['family'] = msg['PID']['PID.5']['PID.5.1'].toString();
tmp['entry'][0]['resource']['name'][0]['given'][0] = msg['PID']['PID.5']['PID.5.2'].toString();
tmp['entry'][0]['resource']['birthDate'] = DateUtil.convertDate('yyyyMMdd', 'yyyy-MM-dd',msg['PID']['PID.7']['PID.7.1'].toString());

var gender = 'other';

if (msg['PID']['PID.8']['PID.8.1'].toString().startsWith('M'))
	{
		gender = 'male';
		}
else
	{
		gender = 'female';
		}

tmp['entry'][0]['resource']['gender'] = gender;

tmp['entry'][0]['resource']['address'][0]['line'][0] = msg['PID']['PID.11']['PID.11.1'].toString();

tmp['entry'][0]['resource']['address'][0]['city'] = msg['PID']['PID.11']['PID.11.3'].toString();
tmp['entry'][0]['resource']['address'][0]['state'] = msg['PID']['PID.11']['PID.11.4'].toString();
tmp['entry'][0]['resource']['address'][0]['postalCode'] = msg['PID']['PID.11']['PID.11.5'].toString();

/*
var patient_json = JSON.stringify(tmp);
var patient_resource = JSON.parse(patient_json);

globalChannelMap.put('patient_resource','patient_resource'); */


channelMap.put('patient_resource', JSON.stringify(tmp));</script>
          </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        </elements>
        <inboundTemplate encoding="base64">TVNIfF5+XCZ8TUVTQV9BRFR8WFlaX0FETUlUVElOR3xpRld8WllYX0hPU1BJVEFMfHx8QURUXkEw
NHwxMDMxMDJ8UHwyLjR8fHx8fHx8fApFVk58fDIwMDAwNzAxMDgwMHx8fHwyMDAwMDcwMTA4MDAK
UElEfHx8NTgzMjk1Xl5eQURUMXx8RE9FXkpBTkV8fDE5NjEwNjE1fE0tfHwyMTA2LTN8MTIzIE1B
SU4gU1RSRUVUXl5HUkVFTlNCT1JPXk5DXjI3NDAxLTEwMjB8R0x8KDkxOSkzNzktMTIxMnwoOTE5
KTI3MS0zNDM0fig5MTkpMjc3LTMxMTR8fFN8fFBBVElEMTIzNDUwMDFeMl5NMTB8MTIzNDU2Nzg5
fDktODc2NTReTkMKTksxfDF8QkFURVNeUk9OQUxEXkx8U1BPfHx8fHwyMDAxMTEwNQpQVjF8fEV8
fHx8fHw1MTAxXk5FTExeRlJFREVSSUNLXlBeXkRSfHx8fHx8fHx8fHxWMTI5NV5eXkFEVDF8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8MjAwMDA3MDEwODAwfHx8fHx8fHwKUFYyfHx8XkFCRE9NSU5B
TCBQQUlOCk9CWHwxfEhEfFNSIEluc3RhbmNlIFVJRHx8MS4xMjM0NTYuMi4yMDAwLjMxLjIuMXx8
fHx8fEZ8fHx8fHwKQUwxfDF8fF5QRU5JQ0lMTElOfHxQUk9EVUNFUyBISVZFU35SQVNICkFMMXwy
fHxeQ0FUIERBTkRFUgpERzF8MDAxfEk5fDE1NTB8TUFMIE5FTyBMSVZFUiwgUFJJTUFSWXwxOTg4
MDUwMTEwMzAwNXxGfHwKUFIxfDIyMzR8TTExfDExMV5DT0RFMTUxfENPTU1PTiBQUk9DRURVUkVT
fDE5ODgwOTA4MTEyMwpST0x8NDVeUkVDT1JERVJeUk9MRSBNQVNURVIgTElTVHxBRHxDUHxLQVRF
XlNNSVRIXkVMTEVOfDE5OTUwNTAxMTIwMQpHVDF8MTEyMnwxNTE5fEJJTExeR0FURVNeQQpJTjF8
MDAxfEEzNTd8MTIzNHxCQ01EfHx8fHwxMzI5ODcKSU4yfElEMTU1MTAwMXxTU04xMjM0NTY3OA==
</inboundTemplate>
        <outboundTemplate encoding="base64">ewogICJyZXNvdXJjZVR5cGUiOiAiQnVuZGxlIiwKICAiaWQiOiAiYnVuZGxlLXRyYW5zYWN0aW9u
IiwKICAibWV0YSI6IHsKICAgICJsYXN0VXBkYXRlZCI6ICIyMDE4LTAzLTExVDExOjIyOjE2WiIK
ICB9LAogICJ0eXBlIjogInRyYW5zYWN0aW9uIiwKICAiZW50cnkiOiBbCiAgICB7CiAgICAgICJy
ZXNvdXJjZSI6IHsKICAgICAgICAicmVzb3VyY2VUeXBlIjogIlBhdGllbnQiLAoJCSJpZGVudGlm
aWVyIiA6ICJBMTIwOTU2IiwKICAgICAgICAibmFtZSI6IFsKICAgICAgICAgIHsKICAgICAgICAg
ICAgImZhbWlseSI6ICJTbWl0aCIsCiAgICAgICAgICAgICJnaXZlbiI6IFsKICAgICAgICAgICAg
ICAiRGFyY3kiCiAgICAgICAgICAgIF0KICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgICJn
ZW5kZXIiOiAiZmVtYWxlIiwKCQkiYmlydGhEYXRlIiA6ICIxOTkwLTAzLTA2IiwKICAgICAgICAi
YWRkcmVzcyI6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgImxpbmUiOiBbCiAgICAgICAgICAg
ICAgIjEyMyBNYWluIFN0LiIKICAgICAgICAgICAgXSwKICAgICAgICAgICAgImNpdHkiOiAiQW55
Y2l0eSIsCiAgICAgICAgICAgICJzdGF0ZSI6ICJDQSIsCiAgICAgICAgICAgICJwb3N0YWxDb2Rl
IjogIjEyMzQ1IgogICAgICAgICAgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgInJlcXVlc3Qi
OiB7CiAgICAgICAgIm1ldGhvZCI6ICJQT1NUIiwKICAgICAgICAidXJsIjogIlBhdGllbnQiCiAg
ICAgIH0KICAgIH0KICBdCn0=</outboundTemplate>
        <inboundDataType>HL7V2</inboundDataType>
        <outboundDataType>JSON</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="3.9.1">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="3.9.1">
            <splitType>JavaScript</splitType>
            <batchScript/>
          </batchProperties>
        </outboundProperties>
      </transformer>
      <responseTransformer version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.9.1">
            <name>resourceID</name>
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <script>var locationHistory = msg['entry'][0]['response']['location'];

var resourceID = locationHistory.substring(8,16);

channelMap.put("resourceID",resourceID);</script>
          </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        </elements>
        <inboundTemplate encoding="base64">ewogICAgInJlc291cmNlVHlwZSI6ICJCdW5kbGUiLAogICAgImlkIjogIjU1NDhjZTU0LThmMzgt
NDFmMS05ZGQ4LWQzMWFkOTQzMzNmOCIsCiAgICAidHlwZSI6ICJ0cmFuc2FjdGlvbi1yZXNwb25z
ZSIsCiAgICAibGluayI6IFsKICAgICAgICB7CiAgICAgICAgICAgICJyZWxhdGlvbiI6ICJzZWxm
IiwKICAgICAgICAgICAgInVybCI6ICJodHRwczovL2hhcGkuZmhpci5vcmcvYmFzZVI0IgogICAg
ICAgIH0KICAgIF0sCiAgICAiZW50cnkiOiBbCiAgICAgICAgewogICAgICAgICAgICAicmVzcG9u
c2UiOiB7CiAgICAgICAgICAgICAgICAic3RhdHVzIjogIjIwMSBDcmVhdGVkIiwKICAgICAgICAg
ICAgICAgICJsb2NhdGlvbiI6ICJQYXRpZW50LzEwNzI2NjMwL19oaXN0b3J5LzEiLAogICAgICAg
ICAgICAgICAgImV0YWciOiAiMSIsCiAgICAgICAgICAgICAgICAibGFzdE1vZGlmaWVkIjogIjIw
MjMtMDYtMTNUMTA6MzY6MDkuMzM5KzAwOjAwIiwKICAgICAgICAgICAgICAgICJvdXRjb21lIjog
ewogICAgICAgICAgICAgICAgICAgICJyZXNvdXJjZVR5cGUiOiAiT3BlcmF0aW9uT3V0Y29tZSIs
CiAgICAgICAgICAgICAgICAgICAgInRleHQiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJz
dGF0dXMiOiAiZ2VuZXJhdGVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgImRpdiI6ICI8ZGl2
IHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiPjxoMT5PcGVyYXRpb24gT3V0
Y29tZTwvaDE+PHRhYmxlIGJvcmRlcj1cIjBcIj48dHI+PHRkIHN0eWxlPVwiZm9udC13ZWlnaHQ6
IGJvbGQ7XCI+SU5GT1JNQVRJT048L3RkPjx0ZD5bXTwvdGQ+PHRkPlN1Y2Nlc3NmdWxseSBjcmVh
dGVkIHJlc291cmNlICZxdW90O1BhdGllbnQvMTA3MjY2MzAvX2hpc3RvcnkvMSZxdW90Oy4gVG9v
ayAyM21zLjwvdGQ+PC90cj48L3RhYmxlPjwvZGl2PiIKICAgICAgICAgICAgICAgICAgICB9LAog
ICAgICAgICAgICAgICAgICAgICJpc3N1ZSI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgewog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgInNldmVyaXR5IjogImluZm9ybWF0aW9uIiwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICJjb2RlIjogImluZm9ybWF0aW9uYWwiLAogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgImRldGFpbHMiOiB7CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgImNvZGluZyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInN5c3RlbSI6ICJodHRw
czovL2hhcGlmaGlyLmlvL2ZoaXIvQ29kZVN5c3RlbS9oYXBpLWZoaXItc3RvcmFnZS1yZXNwb25z
ZS1jb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjb2RlIjog
IlNVQ0NFU1NGVUxfQ1JFQVRFIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJkaXNwbGF5IjogIkNyZWF0ZSBzdWNjZWVkZWQuIgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkaWFn
bm9zdGljcyI6ICJTdWNjZXNzZnVsbHkgY3JlYXRlZCByZXNvdXJjZSBcIlBhdGllbnQvMTA3MjY2
MzAvX2hpc3RvcnkvMVwiLiBUb29rIDIzbXMuIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAg
ICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAg
ICAgfQogICAgXQp9</inboundTemplate>
        <outboundTemplate encoding="base64"/>
        <inboundDataType>JSON</inboundDataType>
        <outboundDataType>JSON</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="3.9.1">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="3.9.1">
            <splitType>JavaScript</splitType>
            <batchScript/>
          </batchProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="3.9.1">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="3.9.1">
            <splitType>JavaScript</splitType>
            <batchScript/>
          </batchProperties>
        </outboundProperties>
      </responseTransformer>
      <filter version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.rulebuilder.RuleBuilderRule version="3.9.1">
            <name>Accept message if "$('NewPatient')" equals 1</name>
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <field>$('NewPatient')</field>
            <condition>EQUALS</condition>
            <values>
              <string>1</string>
            </values>
          </com.mirth.connect.plugins.rulebuilder.RuleBuilderRule>
          <com.mirth.connect.plugins.rulebuilder.RuleBuilderRule version="3.9.1">
            <name>Accept message if "msg['MSH']['MSH.9']['MSH.9.1'].toString()" equals "ADT"</name>
            <sequenceNumber>1</sequenceNumber>
            <enabled>true</enabled>
            <operator>AND</operator>
            <field>msg['MSH']['MSH.9']['MSH.9.1'].toString()</field>
            <condition>EQUALS</condition>
            <values>
              <string>"ADT"</string>
            </values>
          </com.mirth.connect.plugins.rulebuilder.RuleBuilderRule>
        </elements>
      </filter>
      <transportName>HTTP Sender</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
      <waitForPrevious>true</waitForPrevious>
    </connector>
    <connector version="3.9.1">
      <metaDataId>3</metaDataId>
      <name>Update Allergy Information</name>
      <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.9.1">
        <pluginProperties/>
        <destinationConnectorProperties version="3.9.1">
          <queueEnabled>false</queueEnabled>
          <sendFirst>false</sendFirst>
          <retryIntervalMillis>10000</retryIntervalMillis>
          <regenerateTemplate>false</regenerateTemplate>
          <retryCount>0</retryCount>
          <rotate>false</rotate>
          <includeFilterTransformer>false</includeFilterTransformer>
          <threadCount>1</threadCount>
          <threadAssignmentVariable/>
          <validateResponse>false</validateResponse>
          <resourceIds class="linked-hash-map">
            <entry>
              <string>Default Resource</string>
              <string>[Default Resource]</string>
            </entry>
          </resourceIds>
          <queueBufferSize>1000</queueBufferSize>
          <reattachAttachments>true</reattachAttachments>
        </destinationConnectorProperties>
        <host>http://hapi.fhir.org/baseR4/</host>
        <useProxyServer>false</useProxyServer>
        <proxyAddress/>
        <proxyPort/>
        <method>post</method>
        <headers class="linked-hash-map"/>
        <parameters class="linked-hash-map"/>
        <useHeadersVariable>false</useHeadersVariable>
        <headersVariable/>
        <useParametersVariable>false</useParametersVariable>
        <parametersVariable/>
        <responseXmlBody>false</responseXmlBody>
        <responseParseMultipart>true</responseParseMultipart>
        <responseIncludeMetadata>false</responseIncludeMetadata>
        <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
        <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
        <multipart>false</multipart>
        <useAuthentication>false</useAuthentication>
        <authenticationType>Basic</authenticationType>
        <usePreemptiveAuthentication>false</usePreemptiveAuthentication>
        <username/>
        <password/>
        <content>${allergyintolerance}</content>
        <contentType>application/json</contentType>
        <dataTypeBinary>false</dataTypeBinary>
        <charset>UTF-8</charset>
        <socketTimeout>30000</socketTimeout>
      </properties>
      <transformer version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.9.1">
            <name>Mapping of AL1</name>
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <script>tmp['entry'][0]['resource']['category'][0] = msg['AL1'][0]['AL1.2']['AL1.2.1'].toString();
tmp['entry'][0]['resource']['code']['coding'] = msg['AL1'][0]['AL1.3']['AL1.3.1'].toString()
tmp['entry'][0]['resource']['criticality'] = msg['AL1'][0]['AL1.4']['AL1.4.1'].toString();
tmp['entry'][0]['resource']['reaction'][0]['manifestation'][0]['concept']['coding'] = msg['AL1'][0]['AL1.5'][0]['AL1.5.1'].toString();

if(msg['AL1'][0]['AL1.6']['AL1.6.1'].toString())
tmp['entry'][0]['resource']['reaction'][0]['onset'] = DateUtil.convertDate('YYYYMMDD', 'YYYY-MM-DD', msg['AL1'][0]['AL1.6']['AL1.6.1'].toString());


var text1 = "Patient/";
var text2 = $('resourceID');
var ref_path = text1.concat(text2);

logger.info('ref Path--&gt;' +ref_path);

tmp['entry'][0]['resource']['patient']['reference'] = ref_path;



channelMap.put('allergyintolerance', JSON.stringify(tmp));</script>
          </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        </elements>
        <inboundTemplate encoding="base64">TVNIfF5+XCZ8TUVTQV9BRFR8WFlaX0FETUlUVElOR3xpRld8WllYX0hPU1BJVEFMfHx8QURUXkEw
NHwxMDMxMDJ8UHwyLjR8fHx8fHx8fApFVk58fDIwMDAwNzAxMDgwMHx8fHwyMDAwMDcwMTA4MDAK
UElEfHx8NTgzMjk1Xl5eQURUMXx8RE9FXkpBTkV8fDE5NjEwNjE1fE0tfHwyMTA2LTN8MTIzIE1B
SU4gU1RSRUVUXl5HUkVFTlNCT1JPXk5DXjI3NDAxLTEwMjB8R0x8KDkxOSkzNzktMTIxMnwoOTE5
KTI3MS0zNDM0fig5MTkpMjc3LTMxMTR8fFN8fFBBVElEMTIzNDUwMDFeMl5NMTB8MTIzNDU2Nzg5
fDktODc2NTReTkMKTksxfDF8QkFURVNeUk9OQUxEXkx8U1BPfHx8fHwyMDAxMTEwNQpQVjF8fEV8
fHx8fHw1MTAxXk5FTExeRlJFREVSSUNLXlBeXkRSfHx8fHx8fHx8fHxWMTI5NV5eXkFEVDF8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8MjAwMDA3MDEwODAwfHx8fHx8fHwKUFYyfHx8XkFCRE9NSU5B
TCBQQUlOCk9CWHwxfEhEfFNSIEluc3RhbmNlIFVJRHx8MS4xMjM0NTYuMi4yMDAwLjMxLjIuMXx8
fHx8fEZ8fHx8fHwKQUwxfDF8fF5QRU5JQ0lMTElOfHxQUk9EVUNFUyBISVZFU35SQVNIfHwKQUwx
fDJ8fF5DQVQgREFOREVSCkRHMXwwMDF8STl8MTU1MHxNQUwgTkVPIExJVkVSLCBQUklNQVJZfDE5
ODgwNTAxMTAzMDA1fEZ8fApQUjF8MjIzNHxNMTF8MTExXkNPREUxNTF8Q09NTU9OIFBST0NFRFVS
RVN8MTk4ODA5MDgxMTIzClJPTHw0NV5SRUNPUkRFUl5ST0xFIE1BU1RFUiBMSVNUfEFEfENQfEtB
VEVeU01JVEheRUxMRU58MTk5NTA1MDExMjAxCkdUMXwxMTIyfDE1MTl8QklMTF5HQVRFU15BCklO
MXwwMDF8QTM1N3wxMjM0fEJDTUR8fHx8fDEzMjk4NwpJTjJ8SUQxNTUxMDAxfFNTTjEyMzQ1Njc4
</inboundTemplate>
        <outboundTemplate encoding="base64">ewogICJyZXNvdXJjZVR5cGUiOiAiQnVuZGxlIiwKICAiaWQiOiAiYnVuZGxlLXRyYW5zYWN0aW9u
IiwKICAibWV0YSI6IHsKICAgICJsYXN0VXBkYXRlZCI6ICIyMDE4LTAzLTExVDExOjIyOjE2WiIK
ICB9LAogICJ0eXBlIjogInRyYW5zYWN0aW9uIiwKICAiZW50cnkiOiBbCiAgICB7CiAgICAgICJy
ZXNvdXJjZSI6IHsKICAgICAgICAicmVzb3VyY2VUeXBlIiA6ICJBbGxlcmd5SW50b2xlcmFuY2Ui
LAogICJpZCIgOiAiZXhhbXBsZSIsCiAgInRleHQiIDogewogICAgInN0YXR1cyIgOiAiZ2VuZXJh
dGVkIiwKICAgICJkaXYiIDogIjxkaXYgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3ho
dG1sXCI+PHA+PGI+R2VuZXJhdGVkIE5hcnJhdGl2ZTogQWxsZXJneUludG9sZXJhbmNlPC9iPjxh
IG5hbWU9XCJleGFtcGxlXCI+IDwvYT48L3A+PGRpdiBzdHlsZT1cImRpc3BsYXk6IGlubGluZS1i
bG9jazsgYmFja2dyb3VuZC1jb2xvcjogI2Q5ZTBlNzsgcGFkZGluZzogNnB4OyBtYXJnaW46IDRw
eDsgYm9yZGVyOiAxcHggc29saWQgIzhkYTFiNDsgYm9yZGVyLXJhZGl1czogNXB4OyBsaW5lLWhl
aWdodDogNjAlXCI+PHAgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAwcHhcIj5SZXNvdXJjZSBBbGxl
cmd5SW50b2xlcmFuY2UgJnF1b3Q7ZXhhbXBsZSZxdW90OyA8L3A+PC9kaXY+PHA+PGI+aWRlbnRp
ZmllcjwvYj46IDxzcGFuIHRpdGxlPVwiICBhbiBpZGVudGlmaWVyIHVzZWQgZm9yIHRoaXMgYWxs
ZXJnaWMgcHJvcGVuc2l0eSAoYWR2ZXJzZSByZWFjdGlvbiByaXNrKSAgXCI+aWQ6XHUwMGEwNDk0
NzY1MzQ8L3NwYW4+PC9wPjxwPjxiPmNsaW5pY2FsU3RhdHVzPC9iPjogPHNwYW4gdGl0bGU9XCIg
IHRoaXMgaW5kaXZpZHVhbCBoYXMgaGFkIHNldmVyYWwgcmVhY3Rpb25zICBcIj5BY3RpdmUgPHNw
YW4gc3R5bGU9XCJiYWNrZ3JvdW5kOiBMaWdodEdvbGRlblJvZFllbGxvdzsgbWFyZ2luOiA0cHg7
IGJvcmRlcjogMXB4IHNvbGlkIGtoYWtpXCI+ICg8YSBocmVmPVwiaHR0cDovL3Rlcm1pbm9sb2d5
LmhsNy5vcmcvNS4xLjAvQ29kZVN5c3RlbS1hbGxlcmd5aW50b2xlcmFuY2UtY2xpbmljYWwuaHRt
bFwiPkFsbGVyZ3lJbnRvbGVyYW5jZSBDbGluaWNhbCBTdGF0dXMgQ29kZXM8L2E+I2FjdGl2ZSk8
L3NwYW4+PC9zcGFuPjwvcD48cD48Yj52ZXJpZmljYXRpb25TdGF0dXM8L2I+OiBDb25maXJtZWQg
PHNwYW4gc3R5bGU9XCJiYWNrZ3JvdW5kOiBMaWdodEdvbGRlblJvZFllbGxvdzsgbWFyZ2luOiA0
cHg7IGJvcmRlcjogMXB4IHNvbGlkIGtoYWtpXCI+ICg8YSBocmVmPVwiaHR0cDovL3Rlcm1pbm9s
b2d5LmhsNy5vcmcvNS4xLjAvQ29kZVN5c3RlbS1hbGxlcmd5aW50b2xlcmFuY2UtdmVyaWZpY2F0
aW9uLmh0bWxcIj5BbGxlcmd5SW50b2xlcmFuY2UgVmVyaWZpY2F0aW9uIFN0YXR1czwvYT4jY29u
ZmlybWVkKTwvc3Bhbj48L3A+PHA+PGI+dHlwZTwvYj46IDxzcGFuIHRpdGxlPVwiICBub3RlOiBp
dCdzIG9mdGVuIHVua25vd24gd2hldGhlciBhbiBhbGxlcmd5IGlzIG1lZGlhdGVkIGJ5IGFuIGlt
bXVuZSByZXNwb25zZSwgYW5kIG5vdCBhcyBzaWduaWZpY2FudCBhcyBvbmNlIHRob3VnaHQgIFwi
PkFsbGVyZ3kgPHNwYW4gc3R5bGU9XCJiYWNrZ3JvdW5kOiBMaWdodEdvbGRlblJvZFllbGxvdzsg
bWFyZ2luOiA0cHg7IGJvcmRlcjogMXB4IHNvbGlkIGtoYWtpXCI+ICg8YSBocmVmPVwiY29kZXN5
c3RlbS1hbGxlcmd5LWludG9sZXJhbmNlLXR5cGUuaHRtbFwiPkFsbGVyZ3kgSW50b2xlcmFuY2Ug
VHlwZTwvYT4jYWxsZXJneSk8L3NwYW4+PC9zcGFuPjwvcD48cD48Yj5jYXRlZ29yeTwvYj46IDxz
cGFuIHRpdGxlPVwiICB0aGlzIGNhdGVnb3JpemF0aW9uIGlzIGltcGxpZWQgYnkgJnF1b3Q7Y2Fz
aGV3IG51dCZxdW90OyBhbmQgdGhlcmVmb3JlIGJhc2ljYWxseSBcbiAgICByZWR1bmRhbnQsIGJ1
dCBtYW55IHN5c3RlbXMgY29sbGVjdCB0aGlzIGZpZWxkIGFueXdheSwgc2luY2UgaXQncyBlaXRo
ZXIgXG4gICAgdXNlZnVsIHdoZW4gdGhlIHN1YnN0YW5jZSBpcyBub3QgY29kZWQsIG9yIGl0J3Mg
cXVpY2tlciB0byBzb3J0L2ZpbHRlciBvblxuICAgIHRoYW4gdXNpbmcgdGVybWlub2xvZ3kgYmFz
ZWQgcmVhc29uaW5nICBcIj5mb29kPC9zcGFuPjwvcD48cD48Yj5jcml0aWNhbGl0eTwvYj46IDxz
cGFuIHRpdGxlPVwiICB0aGVyZSBpcyBubyBxdWVzdGlvbiB0aGF0IHRoZSBhbGxlcmd5IGlzIHJl
YWwgYW5kIHNlcmlvdXMgIFwiPmhpZ2g8L3NwYW4+PC9wPjxwPjxiPmNvZGU8L2I+OiA8c3BhbiB0
aXRsZT1cIiAgQWxsZXJneSBvciBpbnRvbGVyYW5jZSBjb2RlIChzdWJzdGFuY2UsIHByb2R1Y3Qs
IGNvbmRpdGlvbiBvciBuZWdhdGVkL2V4Y2x1ZGVkIHN0YXRlbWVudCkgb3IgdGV4dC4gQSBmZXcg
dGltZXMsIFxuICAgIHRoZXJlJ3MgYSBmdWxsIGRlc2NyaXB0aW9uIG9mIGEgY29tcGxleCBzdWJz
dGFuY2UvcHJvZHVjdCAtIGluIHRoZXNlIGNhZXMsIHVzZSB0aGVcbiAgICBleHRlbnNpb24gW3Vy
bF0gdG8gcmVmZXIgdG8gYSBTdWJzdGFuY2UgcmVzb3VyY2UuICBcIj5DYXNoZXcgbnV0cyA8c3Bh
biBzdHlsZT1cImJhY2tncm91bmQ6IExpZ2h0R29sZGVuUm9kWWVsbG93OyBtYXJnaW46IDRweDsg
Ym9yZGVyOiAxcHggc29saWQga2hha2lcIj4gKDxhIGhyZWY9XCJodHRwczovL2Jyb3dzZXIuaWh0
c2RvdG9vbHMub3JnL1wiPlNOT01FRCBDVDwvYT4jMjI3NDkzMDA1KTwvc3Bhbj48L3NwYW4+PC9w
PjxwPjxiPnBhdGllbnQ8L2I+OiA8c3BhbiB0aXRsZT1cIiAgdGhlIHBhdGllbnQgdGhhdCBhY3R1
YWxseSBoYXMgdGhlIHJpc2sgb2YgYWR2ZXJzZSByZWFjdGlvbiAgXCI+PGEgaHJlZj1cInBhdGll
bnQtZXhhbXBsZS5odG1sXCI+UGF0aWVudC9leGFtcGxlPC9hPiAmcXVvdDtQZXRlciBDSEFMTUVS
UyZxdW90Ozwvc3Bhbj48L3A+PHA+PGI+b25zZXQ8L2I+OiA8c3BhbiB0aXRsZT1cIiAgd2hlbiB0
aGUgYWxsZXJneSB3YXMgZmlyc3Qgbm90ZWQgKGluIHRoaXMgY2FzZSB0aGUgc2FtZSBhcyByZWFj
dGlvbi5vbnNldCBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSkgIFwiPjIwMDQ8L3NwYW4+PC9wPjxw
PjxiPnJlY29yZGVkRGF0ZTwvYj46IDxzcGFuIHRpdGxlPVwiICB0aGUgZGF0ZSB0aGF0IHRoaXMg
ZW50cnkgd2FzIHJlY29yZGVkICBcIj4yMDE0LTEwLTA5VDE0OjU4OjAwKzExOjAwPC9zcGFuPjwv
cD48YmxvY2txdW90ZT48cD48Yj5wYXJ0aWNpcGFudDwvYj48L3A+PHA+PGI+ZnVuY3Rpb248L2I+
OiBBdXRob3IgPHNwYW4gc3R5bGU9XCJiYWNrZ3JvdW5kOiBMaWdodEdvbGRlblJvZFllbGxvdzsg
bWFyZ2luOiA0cHg7IGJvcmRlcjogMXB4IHNvbGlkIGtoYWtpXCI+ICg8YSBocmVmPVwiaHR0cDov
L3Rlcm1pbm9sb2d5LmhsNy5vcmcvNS4xLjAvQ29kZVN5c3RlbS1wcm92ZW5hbmNlLXBhcnRpY2lw
YW50LXR5cGUuaHRtbFwiPlByb3ZlbmFuY2UgcGFydGljaXBhbnQgdHlwZTwvYT4jYXV0aG9yKTwv
c3Bhbj48L3A+PHA+PGI+YWN0b3I8L2I+OiA8YSBocmVmPVwicHJhY3RpdGlvbmVyLWV4YW1wbGUu
aHRtbFwiPlByYWN0aXRpb25lci9leGFtcGxlPC9hPiAmcXVvdDtBZGFtIENBUkVGVUwmcXVvdDs8
L3A+PC9ibG9ja3F1b3RlPjxibG9ja3F1b3RlPjxwPjxiPnBhcnRpY2lwYW50PC9iPjwvcD48cD48
Yj5mdW5jdGlvbjwvYj46IEluZm9ybWFudCA8c3BhbiBzdHlsZT1cImJhY2tncm91bmQ6IExpZ2h0
R29sZGVuUm9kWWVsbG93OyBtYXJnaW46IDRweDsgYm9yZGVyOiAxcHggc29saWQga2hha2lcIj4g
KDxhIGhyZWY9XCJodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy81LjEuMC9Db2RlU3lzdGVtLXBy
b3ZlbmFuY2UtcGFydGljaXBhbnQtdHlwZS5odG1sXCI+UHJvdmVuYW5jZSBwYXJ0aWNpcGFudCB0
eXBlPC9hPiNpbmZvcm1hbnQpPC9zcGFuPjwvcD48cD48Yj5hY3RvcjwvYj46IDxhIGhyZWY9XCJw
YXRpZW50LWV4YW1wbGUuaHRtbFwiPlBhdGllbnQvZXhhbXBsZTwvYT4gJnF1b3Q7UGV0ZXIgQ0hB
TE1FUlMmcXVvdDs8L3A+PC9ibG9ja3F1b3RlPjxwPjxiPmxhc3RPY2N1cnJlbmNlPC9iPjogPHNw
YW4gdGl0bGU9XCIgIGxhc3QgaGFwcGVuZWQgSnVuZSAyMDEyLiBUeXBpY2FsbHksIHN5c3RlbXMg
ZWl0aGVyIHRyYWNrIGxhc3RPY2N1cnJlbmNlLFxuICAgICBvciBhIGxpc3Qgb2YgZXZlbnRzLiAg
XCI+MjAxMi0wNjwvc3Bhbj48L3A+PHA+PGI+bm90ZTwvYj46IDxzcGFuIHRpdGxlPVwiICBhbiBh
ZGRpdGlvbmFsIG5vdGUgYWJvdXQgdGhlIGFsbGVyZ3kgcHJvcGVuc2l0eSBieSB0aGUgcmVjb3Jk
ZXIgIFwiPlRoZSBjcml0aWNhbGl0eSBpcyBoaWdoIGJlY2FzdWUgb2YgdGhlIG9ic2VydmVkIGFu
YXBoeWxhY3RpYyByZWFjdGlvbiB3aGVuIGNoYWxsZW5nZWQgd2l0aCBjYXNoZXcgZXh0cmFjdC48
L3NwYW4+PC9wPjxibG9ja3F1b3RlPjxwPjxiPnJlYWN0aW9uPC9iPjwvcD48cD48Yj5zdWJzdGFu
Y2U8L2I+OiA8c3BhbiB0aXRsZT1cIiAgXG4gICAgICBJdCdzIHBvc3NpYmxlIHRvIGxpc3Qgc3Bl
Y2lmaWMgdGhpbmdzIHRvIHdoaWNoIHRoZSBwYXRpZW50IHJlc3BvbmRlZCxcbiAgICAgIGUuZy4g
Y2hvY29sYXRlICh0aGF0IGhhcHBlbmVkIHRvIGNvbnRhaW4gY2FzaGV3IG51dHMpLiBUaGlzIGV2
ZW50IGhhc1xuICAgICAgc3VjaCBhIHNwZWNpZmljIHN1YnN0YW5jZS4gTm90ZSB0aGF0IHN5c3Rl
bXMgc2hvdWxkIGVuc3VyZSB0aGF0IHdoYXRcbiAgICAgIGdvZXMgaW4gaGVyZSBkb2VzIG5vdCBj
b25mbGljdCB3aXRoIHRoZSBzdWJzdGFuY2UgYWJvdmUsIGFuZCBzeXN0ZW1zXG4gICAgICBwcm9j
ZXNzaW5nIHRoZSBkYXRhIGNhbiBiZSBzdXJlIHRoYXQgd2hhdCBpcyBoZXJlIGRvZXMgbm90IGNv
bnRyYXZlbmVcbiAgICAgIHRoZSBzdWJzdGFuY2UgYWJvdmVcbiAgICAgXCI+Y2FzaGV3IG51dCBh
bGxlcmdlbmljIGV4dHJhY3QgSW5qZWN0YWJsZSBQcm9kdWN0IDxzcGFuIHN0eWxlPVwiYmFja2dy
b3VuZDogTGlnaHRHb2xkZW5Sb2RZZWxsb3c7IG1hcmdpbjogNHB4OyBib3JkZXI6IDFweCBzb2xp
ZCBraGFraVwiPiAoPGEgaHJlZj1cImh0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnLzUuMS4wL0Nv
ZGVTeXN0ZW0tdjMtcnhOb3JtLmh0bWxcIj5SeE5vcm08L2E+IzExNjA1OTMpPC9zcGFuPjwvc3Bh
bj48L3A+PGgzPk1hbmlmZXN0YXRpb25zPC9oMz48dGFibGUgY2xhc3M9XCJncmlkXCI+PHRyPjx0
ZD4tPC90ZD48dGQ+PGI+Q29uY2VwdDwvYj48L3RkPjwvdHI+PHRyPjx0ZD4qPC90ZD48dGQ+QW5h
cGh5bGFjdGljIHJlYWN0aW9uIDxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZDogTGlnaHRHb2xkZW5S
b2RZZWxsb3c7IG1hcmdpbjogNHB4OyBib3JkZXI6IDFweCBzb2xpZCBraGFraVwiPiAoPGEgaHJl
Zj1cImh0dHBzOi8vYnJvd3Nlci5paHRzZG90b29scy5vcmcvXCI+U05PTUVEIENUPC9hPiMzOTU3
OTAwMSk8L3NwYW4+PC90ZD48L3RyPjwvdGFibGU+PHA+PGI+ZGVzY3JpcHRpb248L2I+OiBDaGFs
bGVuZ2UgUHJvdG9jb2wuIFNldmVyZSByZWFjdGlvbiB0byBzdWJjdXRhbmVvdXMgY2FzaGV3IGV4
dHJhY3QuIEVwaW5lcGhyaW5lIGFkbWluaXN0ZXJlZDwvcD48cD48Yj5vbnNldDwvYj46IDIwMTIt
MDYtMTI8L3A+PHA+PGI+c2V2ZXJpdHk8L2I+OiBzZXZlcmU8L3A+PHA+PGI+ZXhwb3N1cmVSb3V0
ZTwvYj46IFN1YmN1dGFuZW91cyByb3V0ZSA8c3BhbiBzdHlsZT1cImJhY2tncm91bmQ6IExpZ2h0
R29sZGVuUm9kWWVsbG93OyBtYXJnaW46IDRweDsgYm9yZGVyOiAxcHggc29saWQga2hha2lcIj4g
KDxhIGhyZWY9XCJodHRwczovL2Jyb3dzZXIuaWh0c2RvdG9vbHMub3JnL1wiPlNOT01FRCBDVDwv
YT4jMzQyMDYwMDUpPC9zcGFuPjwvcD48L2Jsb2NrcXVvdGU+PGJsb2NrcXVvdGU+PHA+PGI+cmVh
Y3Rpb248L2I+PC9wPjxoMz5NYW5pZmVzdGF0aW9uczwvaDM+PHRhYmxlIGNsYXNzPVwiZ3JpZFwi
Pjx0cj48dGQ+LTwvdGQ+PHRkPjxiPkNvbmNlcHQ8L2I+PC90ZD48L3RyPjx0cj48dGQ+KjwvdGQ+
PHRkPlVydGljYXJpYSA8c3BhbiBzdHlsZT1cImJhY2tncm91bmQ6IExpZ2h0R29sZGVuUm9kWWVs
bG93OyBtYXJnaW46IDRweDsgYm9yZGVyOiAxcHggc29saWQga2hha2lcIj4gKDxhIGhyZWY9XCJo
dHRwczovL2Jyb3dzZXIuaWh0c2RvdG9vbHMub3JnL1wiPlNOT01FRCBDVDwvYT4jNjQzMDUwMDEp
PC9zcGFuPjwvdGQ+PC90cj48L3RhYmxlPjxwPjxiPm9uc2V0PC9iPjogMjAwNDwvcD48cD48Yj5z
ZXZlcml0eTwvYj46IG1vZGVyYXRlPC9wPjxwPjxiPm5vdGU8L2I+OiA8c3BhbiB0aXRsZT1cIiAg
YW4gYWRkaXRpb25hbCBub3RlIGFib3V0IHRoZSByZWFjdGlvbiBieSB0aGUgcmVjb3JkZXIgIFwi
PlRoZSBwYXRpZW50IHJlcG9ydHMgdGhhdCB0aGUgb25zZXQgb2YgdXJ0aWNhcmlhIHdhcyB3aXRo
aW4gMTUgbWludXRlcyBvZiBlYXRpbmcgY2FzaGV3cy48L3NwYW4+PC9wPjwvYmxvY2txdW90ZT48
L2Rpdj4iCiAgfSwKICAiaWRlbnRpZmllciIgOiBbewogICAgInN5c3RlbSIgOiAiaHR0cDovL2Fj
bWUuY29tL2lkcy9wYXRpZW50cy9yaXNrcyIsCiAgICAidmFsdWUiIDogIjQ5NDc2NTM0IgogIH1d
LAogICJjbGluaWNhbFN0YXR1cyIgOiB7CiAgICAiY29kaW5nIiA6IFt7CiAgICAgICJzeXN0ZW0i
IDogImh0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vYWxsZXJneWludG9sZXJh
bmNlLWNsaW5pY2FsIiwKICAgICAgImNvZGUiIDogImFjdGl2ZSIsCiAgICAgICJkaXNwbGF5IiA6
ICJBY3RpdmUiCiAgICB9XQogIH0sCiAgInZlcmlmaWNhdGlvblN0YXR1cyIgOiB7CiAgICAiY29k
aW5nIiA6IFt7CiAgICAgICJzeXN0ZW0iIDogImh0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0Nv
ZGVTeXN0ZW0vYWxsZXJneWludG9sZXJhbmNlLXZlcmlmaWNhdGlvbiIsCiAgICAgICJjb2RlIiA6
ICJjb25maXJtZWQiLAogICAgICAiZGlzcGxheSIgOiAiQ29uZmlybWVkIgogICAgfV0KICB9LAog
ICJ0eXBlIiA6IHsKICAgICJjb2RpbmciIDogW3sKICAgICAgInN5c3RlbSIgOiAiaHR0cDovL2hs
Ny5vcmcvZmhpci9hbGxlcmd5LWludG9sZXJhbmNlLXR5cGUiLAogICAgICAiY29kZSIgOiAiYWxs
ZXJneSIsCiAgICAgICJkaXNwbGF5IiA6ICJBbGxlcmd5IgogICAgfV0KICB9LAogICJjYXRlZ29y
eSIgOiBbImZvb2QiXSwKICAiY3JpdGljYWxpdHkiIDogImhpZ2giLAogICJjb2RlIiA6IHsKICAg
ICJjb2RpbmciIDogW3sKICAgICAgInN5c3RlbSIgOiAiaHR0cDovL3Nub21lZC5pbmZvL3NjdCIs
CiAgICAgICJjb2RlIiA6ICIyMjc0OTMwMDUiLAogICAgICAiZGlzcGxheSIgOiAiQ2FzaGV3IG51
dHMiCiAgICB9XQogIH0sCiAgInBhdGllbnQiIDogewogICAgInJlZmVyZW5jZSIgOiAiUGF0aWVu
dC9leGFtcGxlIgogIH0sCiAgIm9uc2V0RGF0ZVRpbWUiIDogIjIwMDQiLAogICJyZWNvcmRlZERh
dGUiIDogIjIwMTQtMTAtMDlUMTQ6NTg6MDArMTE6MDAiLAogICJwYXJ0aWNpcGFudCIgOiBbewog
ICAgImZ1bmN0aW9uIiA6IHsKICAgICAgImNvZGluZyIgOiBbewogICAgICAgICJzeXN0ZW0iIDog
Imh0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vcHJvdmVuYW5jZS1wYXJ0aWNp
cGFudC10eXBlIiwKICAgICAgICAiY29kZSIgOiAiYXV0aG9yIiwKICAgICAgICAiZGlzcGxheSIg
OiAiQXV0aG9yIgogICAgICB9XQogICAgfSwKICAgICJhY3RvciIgOiB7CiAgICAgICJyZWZlcmVu
Y2UiIDogIlByYWN0aXRpb25lci9leGFtcGxlIgogICAgfQogIH0sCiAgewogICAgImZ1bmN0aW9u
IiA6IHsKICAgICAgImNvZGluZyIgOiBbewogICAgICAgICJzeXN0ZW0iIDogImh0dHA6Ly90ZXJt
aW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vcHJvdmVuYW5jZS1wYXJ0aWNpcGFudC10eXBlIiwK
ICAgICAgICAiY29kZSIgOiAiaW5mb3JtYW50IiwKICAgICAgICAiZGlzcGxheSIgOiAiSW5mb3Jt
YW50IgogICAgICB9XQogICAgfSwKICAgICJhY3RvciIgOiB7CiAgICAgICJyZWZlcmVuY2UiIDog
IlBhdGllbnQvZXhhbXBsZSIKICAgIH0KICB9XSwKICAibGFzdE9jY3VycmVuY2UiIDogIjIwMTIt
MDYiLAogICJub3RlIiA6IFt7CiAgICAidGV4dCIgOiAiVGhlIGNyaXRpY2FsaXR5IGlzIGhpZ2gg
YmVjYXN1ZSBvZiB0aGUgb2JzZXJ2ZWQgYW5hcGh5bGFjdGljIHJlYWN0aW9uIHdoZW4gY2hhbGxl
bmdlZCB3aXRoIGNhc2hldyBleHRyYWN0LiIKICB9XSwKICAicmVhY3Rpb24iIDogW3sKICAgICJz
dWJzdGFuY2UiIDogewogICAgICAiY29kaW5nIiA6IFt7CiAgICAgICAgInN5c3RlbSIgOiAiaHR0
cDovL3d3dy5ubG0ubmloLmdvdi9yZXNlYXJjaC91bWxzL3J4bm9ybSIsCiAgICAgICAgImNvZGUi
IDogIjExNjA1OTMiLAogICAgICAgICJkaXNwbGF5IiA6ICJjYXNoZXcgbnV0IGFsbGVyZ2VuaWMg
ZXh0cmFjdCBJbmplY3RhYmxlIFByb2R1Y3QiCiAgICAgIH1dCiAgICB9LAogICAgIm1hbmlmZXN0
YXRpb24iIDogW3sKICAgICAgImNvbmNlcHQiIDogewogICAgICAgICJjb2RpbmciIDogW3sKICAg
ICAgICAgICJzeXN0ZW0iIDogImh0dHA6Ly9zbm9tZWQuaW5mby9zY3QiLAogICAgICAgICAgImNv
ZGUiIDogIjM5NTc5MDAxIiwKICAgICAgICAgICJkaXNwbGF5IiA6ICJBbmFwaHlsYWN0aWMgcmVh
Y3Rpb24iCiAgICAgICAgfV0KICAgICAgfQogICAgfV0sCiAgICAiZGVzY3JpcHRpb24iIDogIkNo
YWxsZW5nZSBQcm90b2NvbC4gU2V2ZXJlIHJlYWN0aW9uIHRvIHN1YmN1dGFuZW91cyBjYXNoZXcg
ZXh0cmFjdC4gRXBpbmVwaHJpbmUgYWRtaW5pc3RlcmVkIiwKICAgICJvbnNldCIgOiAiMjAxMi0w
Ni0xMiIsCiAgICAic2V2ZXJpdHkiIDogInNldmVyZSIsCiAgICAiZXhwb3N1cmVSb3V0ZSIgOiB7
CiAgICAgICJjb2RpbmciIDogW3sKICAgICAgICAic3lzdGVtIiA6ICJodHRwOi8vc25vbWVkLmlu
Zm8vc2N0IiwKICAgICAgICAiY29kZSIgOiAiMzQyMDYwMDUiLAogICAgICAgICJkaXNwbGF5IiA6
ICJTdWJjdXRhbmVvdXMgcm91dGUiCiAgICAgIH1dCiAgICB9CiAgfSwKICB7CiAgICAibWFuaWZl
c3RhdGlvbiIgOiBbewogICAgICAiY29uY2VwdCIgOiB7CiAgICAgICAgImNvZGluZyIgOiBbewog
ICAgICAgICAgInN5c3RlbSIgOiAiaHR0cDovL3Nub21lZC5pbmZvL3NjdCIsCiAgICAgICAgICAi
Y29kZSIgOiAiNjQzMDUwMDEiLAogICAgICAgICAgImRpc3BsYXkiIDogIlVydGljYXJpYSIKICAg
ICAgICB9XQogICAgICB9CiAgICB9XSwKICAgICJvbnNldCIgOiAiMjAwNCIsCiAgICAic2V2ZXJp
dHkiIDogIm1vZGVyYXRlIiwKICAgICJub3RlIiA6IFt7CiAgICAgICJ0ZXh0IiA6ICJUaGUgcGF0
aWVudCByZXBvcnRzIHRoYXQgdGhlIG9uc2V0IG9mIHVydGljYXJpYSB3YXMgd2l0aGluIDE1IG1p
bnV0ZXMgb2YgZWF0aW5nIGNhc2hld3MuIgogICAgfV0KICB9XQogICAgICB9LAogICAgICAicmVx
dWVzdCI6IHsKICAgICAgICAibWV0aG9kIjogIlBPU1QiLAogICAgICAgICJ1cmwiOiAiQWxsZXJn
eUludG9sZXJhbmNlIgogICAgICB9CiAgICB9CiAgXQp9</outboundTemplate>
        <inboundDataType>HL7V2</inboundDataType>
        <outboundDataType>JSON</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="3.9.1">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="3.9.1">
            <splitType>JavaScript</splitType>
            <batchScript/>
          </batchProperties>
        </outboundProperties>
      </transformer>
      <responseTransformer version="3.9.1">
        <elements/>
        <inboundDataType>HL7V2</inboundDataType>
        <outboundDataType>HL7V2</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </outboundProperties>
      </responseTransformer>
      <filter version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.javascriptrule.JavaScriptRule version="3.9.1">
            <name>Patient Check</name>
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <script>if($('NewPatient')== 1 || $('OldPatient') == 1)
	return true;</script>
          </com.mirth.connect.plugins.javascriptrule.JavaScriptRule>
          <com.mirth.connect.plugins.rulebuilder.RuleBuilderRule version="3.9.1">
            <name>Accept message if "msg['MSH']['MSH.9']['MSH.9.1'].toString()" equals "ADT"</name>
            <sequenceNumber>1</sequenceNumber>
            <enabled>true</enabled>
            <operator>AND</operator>
            <field>msg['MSH']['MSH.9']['MSH.9.1'].toString()</field>
            <condition>EQUALS</condition>
            <values>
              <string>"ADT"</string>
            </values>
          </com.mirth.connect.plugins.rulebuilder.RuleBuilderRule>
          <com.mirth.connect.plugins.rulebuilder.RuleBuilderRule version="3.9.1">
            <name>Accept message if "msg['AL1'][0].toString()" exists</name>
            <sequenceNumber>2</sequenceNumber>
            <enabled>true</enabled>
            <operator>AND</operator>
            <field>msg['AL1'][0].toString()</field>
            <condition>EXISTS</condition>
            <values/>
          </com.mirth.connect.plugins.rulebuilder.RuleBuilderRule>
        </elements>
      </filter>
      <transportName>HTTP Sender</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
      <waitForPrevious>true</waitForPrevious>
    </connector>
    <connector version="3.9.1">
      <metaDataId>4</metaDataId>
      <name>Quering Allergies </name>
      <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.9.1">
        <pluginProperties/>
        <destinationConnectorProperties version="3.9.1">
          <queueEnabled>false</queueEnabled>
          <sendFirst>false</sendFirst>
          <retryIntervalMillis>10000</retryIntervalMillis>
          <regenerateTemplate>false</regenerateTemplate>
          <retryCount>0</retryCount>
          <rotate>false</rotate>
          <includeFilterTransformer>false</includeFilterTransformer>
          <threadCount>1</threadCount>
          <threadAssignmentVariable/>
          <validateResponse>false</validateResponse>
          <resourceIds class="linked-hash-map">
            <entry>
              <string>Default Resource</string>
              <string>[Default Resource]</string>
            </entry>
          </resourceIds>
          <queueBufferSize>1000</queueBufferSize>
          <reattachAttachments>true</reattachAttachments>
        </destinationConnectorProperties>
        <host>http://hapi.fhir.org/baseR4/AllergyIntolerance?patient=${resourceID}</host>
        <useProxyServer>false</useProxyServer>
        <proxyAddress/>
        <proxyPort/>
        <method>get</method>
        <headers class="linked-hash-map"/>
        <parameters class="linked-hash-map"/>
        <useHeadersVariable>false</useHeadersVariable>
        <headersVariable/>
        <useParametersVariable>false</useParametersVariable>
        <parametersVariable/>
        <responseXmlBody>false</responseXmlBody>
        <responseParseMultipart>true</responseParseMultipart>
        <responseIncludeMetadata>false</responseIncludeMetadata>
        <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
        <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
        <multipart>false</multipart>
        <useAuthentication>false</useAuthentication>
        <authenticationType>Basic</authenticationType>
        <usePreemptiveAuthentication>false</usePreemptiveAuthentication>
        <username/>
        <password/>
        <content/>
        <contentType>text/plain</contentType>
        <dataTypeBinary>false</dataTypeBinary>
        <charset>UTF-8</charset>
        <socketTimeout>30000</socketTimeout>
      </properties>
      <transformer version="3.9.1">
        <elements/>
        <inboundTemplate encoding="base64">TVNIfF5+XCZ8TUVTQV9PUHxYWVpfSE9TUElUQUx8aUZXfEFCQ19SQURJT0xPR1l8fHxPUk1eTzAx
fDEwMTEwNHxQfDIuM3x8fHx8fHx8ClBJRHwxfHwyMDg5MTMxMl5eXl5FUEl8fEFQUExFU0VFRF5K
T0hOXkFeXk1SLl58fDE5NjYxMjAxfE18fEFmckFtfDUwNSBTLiBIQU1JTFRPTiBBVkVeXk1BRElT
T05eV0leNTM1MDVeVVNeXl5ETiB8RE58KDYwOCkxMjMtNDU2N3woNjA4KTEyMy01Njc4fHxTfHwg
MTE0ODAwMDN8MTIzLTQ1LTc4OTB8fHx8Xl5eV0leXgpQRDF8fHxGQUNJTElUWShFQVNUKV5eMTIz
NDV8MTE3M15NQVRUSEVXU15KQU1FU15BXl5eClBWMXx8fF5eXkNBUkUgSEVBTFRIIFNZU1RFTVNe
Xl5eXnx8fCB8MTE3M15NQVRUSEVXU15KQU1FU15BXl5efHx8fHx8fHx8fHx8NjEwNjEzfHx8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxWCkFMMXx8fHx8fHx8fHx8fHx8fHx8fHx8Ck9SQ3xO
V3w5ODc2NTReRVBJQ3w3NjU0M15FUEN8fEZpbmFsfHxeXl4yMDE0MDQxODE3MDAxNF5eXl58fDIw
MTQwNDE4MTczMzE0fDExNDheUEFUVEVSU09OXkpBTUVTXl5eXnx8MTE3M15NQVRUSEVXU15KQU1F
U15BXl5efDExMzNeXl4yMjJeXl5eXnwoNjE4KTIyMi0xMTIyfHwKT0JSfDF8MzYzNDYzXkVQQ3wx
ODU4XkVQQ3w3MzYxMF5YLVJBWSBBTktMRSAzKyBWV15eXlgtUkFZIEFOS0xFIHx8fHx8fHx8fHx8
fDExNzNeTUFUVEhFV1NeSkFNRVNeQV5eXnwoNjA4KTI1OC18fHx8fHx8fEZpbmFsfHxeXl4yMDE0
MDQxODE3MDAxNF5eXl58fHx8fDYwNjReTUFOU0ZJRUxEXkpFUkVNWV5eXl58fDExNDgwMTBeMUFe
RUFTVF5YLVJBWV5eXnxefApERzF8fEkxMHxTODJeQU5LTEUgRlJBQ1RVUkVeSTEwfEFOS0xFIEZS
QUNUVVJFfHw=</inboundTemplate>
        <outboundTemplate encoding="base64">TVNIfF5+XCZ8TUVTQV9PUHxYWVpfSE9TUElUQUx8aUZXfEFCQ19SQURJT0xPR1l8fHxPUk1eTzAx
fDEwMTEwNHxQfDIuM3x8fHx8fHx8ClBJRHwxfHwyMDg5MTMxMl5eXl5FUEl8fEFQUExFU0VFRF5K
T0hOXkFeXk1SLl58fDE5NjYxMjAxfE18fEFmckFtfDUwNSBTLiBIQU1JTFRPTiBBVkVeXk1BRElT
T05eV0leNTM1MDVeVVNeXl5ETiB8RE58KDYwOCkxMjMtNDU2N3woNjA4KTEyMy01Njc4fHxTfHwg
MTE0ODAwMDN8MTIzLTQ1LTc4OTB8fHx8Xl5eV0leXgpQRDF8fHxGQUNJTElUWShFQVNUKV5eMTIz
NDV8MTE3M15NQVRUSEVXU15KQU1FU15BXl5eClBWMXx8fF5eXkNBUkUgSEVBTFRIIFNZU1RFTVNe
Xl5eXnx8fCB8MTE3M15NQVRUSEVXU15KQU1FU15BXl5efHx8fHx8fHx8fHx8NjEwNjEzfHx8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxWCkFMMXx8fHx8fHx8fHx8fHx8fHx8fHx8Ck9SQ3xO
V3w5ODc2NTReRVBJQ3w3NjU0M15FUEN8fEZpbmFsfHxeXl4yMDE0MDQxODE3MDAxNF5eXl58fDIw
MTQwNDE4MTczMzE0fDExNDheUEFUVEVSU09OXkpBTUVTXl5eXnx8MTE3M15NQVRUSEVXU15KQU1F
U15BXl5efDExMzNeXl4yMjJeXl5eXnwoNjE4KTIyMi0xMTIyfHwKT0JSfDF8MzYzNDYzXkVQQ3wx
ODU4XkVQQ3w3MzYxMF5YLVJBWSBBTktMRSAzKyBWV15eXlgtUkFZIEFOS0xFIHx8fHx8fHx8fHx8
fDExNzNeTUFUVEhFV1NeSkFNRVNeQV5eXnwoNjA4KTI1OC18fHx8fHx8fEZpbmFsfHxeXl4yMDE0
MDQxODE3MDAxNF5eXl58fHx8fDYwNjReTUFOU0ZJRUxEXkpFUkVNWV5eXl58fDExNDgwMTBeMUFe
RUFTVF5YLVJBWV5eXnxefApERzF8fEkxMHxTODJeQU5LTEUgRlJBQ1RVUkVeSTEwfEFOS0xFIEZS
QUNUVVJFfHw=</outboundTemplate>
        <inboundDataType>HL7V2</inboundDataType>
        <outboundDataType>HL7V2</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </outboundProperties>
      </transformer>
      <responseTransformer version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.9.1">
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <script>channelMap.put('AL1_3',msg['entry'][0]['resource']['reaction'][0]['substance']['coding'][0]['code']);
channelMap.put('AL1_4',msg['entry'][0]['resource']['criticality']);
channelMap.put('AL1_5',msg['entry'][0]['resource']['reaction'][0]['substance']['coding'][0]['code']);
channelMap.put('AL1_6',msg['entry'][0]['resource']['recordedDate']);</script>
          </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        </elements>
        <inboundTemplate encoding="base64">ewogICJyZXNvdXJjZVR5cGUiOiAiQnVuZGxlIiwKICAiaWQiOiAiMjljOGVlOWUtNTkyMC00OTZh
LTgwNzUtNzY1YTY4M2MxNzk2IiwKICAibWV0YSI6IHsKICAgICJsYXN0VXBkYXRlZCI6ICIyMDIz
LTA2LTEzVDE1OjM2OjI3Ljg5OCswMDowMCIKICB9LAogICJ0eXBlIjogInNlYXJjaHNldCIsCiAg
InRvdGFsIjogMSwKICAibGluayI6IFsgewogICAgInJlbGF0aW9uIjogInNlbGYiLAogICAgInVy
bCI6ICJodHRwczovL2hhcGkuZmhpci5vcmcvYmFzZVI0L0FsbGVyZ3lJbnRvbGVyYW5jZT9wYXRp
ZW50PTEwNzI3Nzk0IgogIH0gXSwKICAiZW50cnkiOiBbIHsKICAgICJmdWxsVXJsIjogImh0dHBz
Oi8vaGFwaS5maGlyLm9yZy9iYXNlUjQvQWxsZXJneUludG9sZXJhbmNlLzEwNzI3Nzk2IiwKICAg
ICJyZXNvdXJjZSI6IHsKICAgICAgInJlc291cmNlVHlwZSI6ICJBbGxlcmd5SW50b2xlcmFuY2Ui
LAogICAgICAiaWQiOiAiMTA3Mjc3OTYiLAogICAgICAibWV0YSI6IHsKICAgICAgICAidmVyc2lv
bklkIjogIjEiLAogICAgICAgICJsYXN0VXBkYXRlZCI6ICIyMDIzLTA2LTEzVDE1OjE5OjE1LjU1
NCswMDowMCIsCiAgICAgICAgInNvdXJjZSI6ICIjejdFOGl0eU5JTUFDVjhObSIKICAgICAgfSwK
ICAgICAgInRleHQiOiB7CiAgICAgICAgInN0YXR1cyI6ICJnZW5lcmF0ZWQiLAogICAgICAgICJk
aXYiOiAiPGRpdiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIj48cD48Yj5H
ZW5lcmF0ZWQgTmFycmF0aXZlOiBBbGxlcmd5SW50b2xlcmFuY2U8L2I+PGEgbmFtZT1cImV4YW1w
bGVcIj4gPC9hPjwvcD48ZGl2IHN0eWxlPVwiZGlzcGxheTogaW5saW5lLWJsb2NrOyBiYWNrZ3Jv
dW5kLWNvbG9yOiAjZDllMGU3OyBwYWRkaW5nOiA2cHg7IG1hcmdpbjogNHB4OyBib3JkZXI6IDFw
eCBzb2xpZCAjOGRhMWI0OyBib3JkZXItcmFkaXVzOiA1cHg7IGxpbmUtaGVpZ2h0OiA2MCVcIj48
cCBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDBweFwiPlJlc291cmNlIEFsbGVyZ3lJbnRvbGVyYW5j
ZSAmcXVvdDtleGFtcGxlJnF1b3Q7IDwvcD48L2Rpdj48cD48Yj5pZGVudGlmaWVyPC9iPjogPHNw
YW4gdGl0bGU9XCIgIGFuIGlkZW50aWZpZXIgdXNlZCBmb3IgdGhpcyBhbGxlcmdpYyBwcm9wZW5z
aXR5IChhZHZlcnNlIHJlYWN0aW9uIHJpc2spICBcIj5pZDogNDk0NzY1MzQ8L3NwYW4+PC9wPjxw
PjxiPmNsaW5pY2FsU3RhdHVzPC9iPjogPHNwYW4gdGl0bGU9XCIgIHRoaXMgaW5kaXZpZHVhbCBo
YXMgaGFkIHNldmVyYWwgcmVhY3Rpb25zICBcIj5BY3RpdmUgPHNwYW4gc3R5bGU9XCJiYWNrZ3Jv
dW5kOiBMaWdodEdvbGRlblJvZFllbGxvdzsgbWFyZ2luOiA0cHg7IGJvcmRlcjogMXB4IHNvbGlk
IGtoYWtpXCI+ICg8YSBocmVmPVwiaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvNS4xLjAvQ29k
ZVN5c3RlbS1hbGxlcmd5aW50b2xlcmFuY2UtY2xpbmljYWwuaHRtbFwiPkFsbGVyZ3lJbnRvbGVy
YW5jZSBDbGluaWNhbCBTdGF0dXMgQ29kZXM8L2E+I2FjdGl2ZSk8L3NwYW4+PC9zcGFuPjwvcD48
cD48Yj52ZXJpZmljYXRpb25TdGF0dXM8L2I+OiBDb25maXJtZWQgPHNwYW4gc3R5bGU9XCJiYWNr
Z3JvdW5kOiBMaWdodEdvbGRlblJvZFllbGxvdzsgbWFyZ2luOiA0cHg7IGJvcmRlcjogMXB4IHNv
bGlkIGtoYWtpXCI+ICg8YSBocmVmPVwiaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvNS4xLjAv
Q29kZVN5c3RlbS1hbGxlcmd5aW50b2xlcmFuY2UtdmVyaWZpY2F0aW9uLmh0bWxcIj5BbGxlcmd5
SW50b2xlcmFuY2UgVmVyaWZpY2F0aW9uIFN0YXR1czwvYT4jY29uZmlybWVkKTwvc3Bhbj48L3A+
PHA+PGI+dHlwZTwvYj46IDxzcGFuIHRpdGxlPVwiICBub3RlOiBpdCdzIG9mdGVuIHVua25vd24g
d2hldGhlciBhbiBhbGxlcmd5IGlzIG1lZGlhdGVkIGJ5IGFuIGltbXVuZSByZXNwb25zZSwgYW5k
IG5vdCBhcyBzaWduaWZpY2FudCBhcyBvbmNlIHRob3VnaHQgIFwiPkFsbGVyZ3kgPHNwYW4gc3R5
bGU9XCJiYWNrZ3JvdW5kOiBMaWdodEdvbGRlblJvZFllbGxvdzsgbWFyZ2luOiA0cHg7IGJvcmRl
cjogMXB4IHNvbGlkIGtoYWtpXCI+ICg8YSBocmVmPVwiY29kZXN5c3RlbS1hbGxlcmd5LWludG9s
ZXJhbmNlLXR5cGUuaHRtbFwiPkFsbGVyZ3kgSW50b2xlcmFuY2UgVHlwZTwvYT4jYWxsZXJneSk8
L3NwYW4+PC9zcGFuPjwvcD48cD48Yj5jYXRlZ29yeTwvYj46IDxzcGFuIHRpdGxlPVwiICB0aGlz
IGNhdGVnb3JpemF0aW9uIGlzIGltcGxpZWQgYnkgJnF1b3Q7Y2FzaGV3IG51dCZxdW90OyBhbmQg
dGhlcmVmb3JlIGJhc2ljYWxseSBcbiAgICByZWR1bmRhbnQsIGJ1dCBtYW55IHN5c3RlbXMgY29s
bGVjdCB0aGlzIGZpZWxkIGFueXdheSwgc2luY2UgaXQncyBlaXRoZXIgXG4gICAgdXNlZnVsIHdo
ZW4gdGhlIHN1YnN0YW5jZSBpcyBub3QgY29kZWQsIG9yIGl0J3MgcXVpY2tlciB0byBzb3J0L2Zp
bHRlciBvblxuICAgIHRoYW4gdXNpbmcgdGVybWlub2xvZ3kgYmFzZWQgcmVhc29uaW5nICBcIj5m
b29kPC9zcGFuPjwvcD48cD48Yj5jcml0aWNhbGl0eTwvYj46IDxzcGFuIHRpdGxlPVwiICB0aGVy
ZSBpcyBubyBxdWVzdGlvbiB0aGF0IHRoZSBhbGxlcmd5IGlzIHJlYWwgYW5kIHNlcmlvdXMgIFwi
PmhpZ2g8L3NwYW4+PC9wPjxwPjxiPmNvZGU8L2I+OiA8c3BhbiB0aXRsZT1cIiAgQWxsZXJneSBv
ciBpbnRvbGVyYW5jZSBjb2RlIChzdWJzdGFuY2UsIHByb2R1Y3QsIGNvbmRpdGlvbiBvciBuZWdh
dGVkL2V4Y2x1ZGVkIHN0YXRlbWVudCkgb3IgdGV4dC4gQSBmZXcgdGltZXMsIFxuICAgIHRoZXJl
J3MgYSBmdWxsIGRlc2NyaXB0aW9uIG9mIGEgY29tcGxleCBzdWJzdGFuY2UvcHJvZHVjdCAtIGlu
IHRoZXNlIGNhZXMsIHVzZSB0aGVcbiAgICBleHRlbnNpb24gW3VybF0gdG8gcmVmZXIgdG8gYSBT
dWJzdGFuY2UgcmVzb3VyY2UuICBcIj5DYXNoZXcgbnV0cyA8c3BhbiBzdHlsZT1cImJhY2tncm91
bmQ6IExpZ2h0R29sZGVuUm9kWWVsbG93OyBtYXJnaW46IDRweDsgYm9yZGVyOiAxcHggc29saWQg
a2hha2lcIj4gKDxhIGhyZWY9XCJodHRwczovL2Jyb3dzZXIuaWh0c2RvdG9vbHMub3JnL1wiPlNO
T01FRCBDVDwvYT4jMjI3NDkzMDA1KTwvc3Bhbj48L3NwYW4+PC9wPjxwPjxiPnBhdGllbnQ8L2I+
OiA8c3BhbiB0aXRsZT1cIiAgdGhlIHBhdGllbnQgdGhhdCBhY3R1YWxseSBoYXMgdGhlIHJpc2sg
b2YgYWR2ZXJzZSByZWFjdGlvbiAgXCI+PGEgaHJlZj1cInBhdGllbnQtZXhhbXBsZS5odG1sXCI+
UGF0aWVudC9leGFtcGxlPC9hPiAmcXVvdDtQZXRlciBDSEFMTUVSUyZxdW90Ozwvc3Bhbj48L3A+
PHA+PGI+b25zZXQ8L2I+OiA8c3BhbiB0aXRsZT1cIiAgd2hlbiB0aGUgYWxsZXJneSB3YXMgZmly
c3Qgbm90ZWQgKGluIHRoaXMgY2FzZSB0aGUgc2FtZSBhcyByZWFjdGlvbi5vbnNldCBvZiB0aGUg
Zmlyc3Qgb2NjdXJyZW5jZSkgIFwiPjIwMDQ8L3NwYW4+PC9wPjxwPjxiPnJlY29yZGVkRGF0ZTwv
Yj46IDxzcGFuIHRpdGxlPVwiICB0aGUgZGF0ZSB0aGF0IHRoaXMgZW50cnkgd2FzIHJlY29yZGVk
ICBcIj4yMDE0LTEwLTA5VDE0OjU4OjAwKzExOjAwPC9zcGFuPjwvcD48YmxvY2txdW90ZT48cD48
Yj5wYXJ0aWNpcGFudDwvYj48L3A+PHA+PGI+ZnVuY3Rpb248L2I+OiBBdXRob3IgPHNwYW4gc3R5
bGU9XCJiYWNrZ3JvdW5kOiBMaWdodEdvbGRlblJvZFllbGxvdzsgbWFyZ2luOiA0cHg7IGJvcmRl
cjogMXB4IHNvbGlkIGtoYWtpXCI+ICg8YSBocmVmPVwiaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5v
cmcvNS4xLjAvQ29kZVN5c3RlbS1wcm92ZW5hbmNlLXBhcnRpY2lwYW50LXR5cGUuaHRtbFwiPlBy
b3ZlbmFuY2UgcGFydGljaXBhbnQgdHlwZTwvYT4jYXV0aG9yKTwvc3Bhbj48L3A+PHA+PGI+YWN0
b3I8L2I+OiA8YSBocmVmPVwicHJhY3RpdGlvbmVyLWV4YW1wbGUuaHRtbFwiPlByYWN0aXRpb25l
ci9leGFtcGxlPC9hPiAmcXVvdDtBZGFtIENBUkVGVUwmcXVvdDs8L3A+PC9ibG9ja3F1b3RlPjxi
bG9ja3F1b3RlPjxwPjxiPnBhcnRpY2lwYW50PC9iPjwvcD48cD48Yj5mdW5jdGlvbjwvYj46IElu
Zm9ybWFudCA8c3BhbiBzdHlsZT1cImJhY2tncm91bmQ6IExpZ2h0R29sZGVuUm9kWWVsbG93OyBt
YXJnaW46IDRweDsgYm9yZGVyOiAxcHggc29saWQga2hha2lcIj4gKDxhIGhyZWY9XCJodHRwOi8v
dGVybWlub2xvZ3kuaGw3Lm9yZy81LjEuMC9Db2RlU3lzdGVtLXByb3ZlbmFuY2UtcGFydGljaXBh
bnQtdHlwZS5odG1sXCI+UHJvdmVuYW5jZSBwYXJ0aWNpcGFudCB0eXBlPC9hPiNpbmZvcm1hbnQp
PC9zcGFuPjwvcD48cD48Yj5hY3RvcjwvYj46IDxhIGhyZWY9XCJwYXRpZW50LWV4YW1wbGUuaHRt
bFwiPlBhdGllbnQvZXhhbXBsZTwvYT4gJnF1b3Q7UGV0ZXIgQ0hBTE1FUlMmcXVvdDs8L3A+PC9i
bG9ja3F1b3RlPjxwPjxiPmxhc3RPY2N1cnJlbmNlPC9iPjogPHNwYW4gdGl0bGU9XCIgIGxhc3Qg
aGFwcGVuZWQgSnVuZSAyMDEyLiBUeXBpY2FsbHksIHN5c3RlbXMgZWl0aGVyIHRyYWNrIGxhc3RP
Y2N1cnJlbmNlLFxuICAgICBvciBhIGxpc3Qgb2YgZXZlbnRzLiAgXCI+MjAxMi0wNjwvc3Bhbj48
L3A+PHA+PGI+bm90ZTwvYj46IDxzcGFuIHRpdGxlPVwiICBhbiBhZGRpdGlvbmFsIG5vdGUgYWJv
dXQgdGhlIGFsbGVyZ3kgcHJvcGVuc2l0eSBieSB0aGUgcmVjb3JkZXIgIFwiPlRoZSBjcml0aWNh
bGl0eSBpcyBoaWdoIGJlY2FzdWUgb2YgdGhlIG9ic2VydmVkIGFuYXBoeWxhY3RpYyByZWFjdGlv
biB3aGVuIGNoYWxsZW5nZWQgd2l0aCBjYXNoZXcgZXh0cmFjdC48L3NwYW4+PC9wPjxibG9ja3F1
b3RlPjxwPjxiPnJlYWN0aW9uPC9iPjwvcD48cD48Yj5zdWJzdGFuY2U8L2I+OiA8c3BhbiB0aXRs
ZT1cIiAgXG4gICAgICBJdCdzIHBvc3NpYmxlIHRvIGxpc3Qgc3BlY2lmaWMgdGhpbmdzIHRvIHdo
aWNoIHRoZSBwYXRpZW50IHJlc3BvbmRlZCxcbiAgICAgIGUuZy4gY2hvY29sYXRlICh0aGF0IGhh
cHBlbmVkIHRvIGNvbnRhaW4gY2FzaGV3IG51dHMpLiBUaGlzIGV2ZW50IGhhc1xuICAgICAgc3Vj
aCBhIHNwZWNpZmljIHN1YnN0YW5jZS4gTm90ZSB0aGF0IHN5c3RlbXMgc2hvdWxkIGVuc3VyZSB0
aGF0IHdoYXRcbiAgICAgIGdvZXMgaW4gaGVyZSBkb2VzIG5vdCBjb25mbGljdCB3aXRoIHRoZSBz
dWJzdGFuY2UgYWJvdmUsIGFuZCBzeXN0ZW1zXG4gICAgICBwcm9jZXNzaW5nIHRoZSBkYXRhIGNh
biBiZSBzdXJlIHRoYXQgd2hhdCBpcyBoZXJlIGRvZXMgbm90IGNvbnRyYXZlbmVcbiAgICAgIHRo
ZSBzdWJzdGFuY2UgYWJvdmVcbiAgICAgXCI+Y2FzaGV3IG51dCBhbGxlcmdlbmljIGV4dHJhY3Qg
SW5qZWN0YWJsZSBQcm9kdWN0IDxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZDogTGlnaHRHb2xkZW5S
b2RZZWxsb3c7IG1hcmdpbjogNHB4OyBib3JkZXI6IDFweCBzb2xpZCBraGFraVwiPiAoPGEgaHJl
Zj1cImh0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnLzUuMS4wL0NvZGVTeXN0ZW0tdjMtcnhOb3Jt
Lmh0bWxcIj5SeE5vcm08L2E+IzExNjA1OTMpPC9zcGFuPjwvc3Bhbj48L3A+PGgzPk1hbmlmZXN0
YXRpb25zPC9oMz48dGFibGUgY2xhc3M9XCJncmlkXCI+PHRyPjx0ZD4tPC90ZD48dGQ+PGI+Q29u
Y2VwdDwvYj48L3RkPjwvdHI+PHRyPjx0ZD4qPC90ZD48dGQ+QW5hcGh5bGFjdGljIHJlYWN0aW9u
IDxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZDogTGlnaHRHb2xkZW5Sb2RZZWxsb3c7IG1hcmdpbjog
NHB4OyBib3JkZXI6IDFweCBzb2xpZCBraGFraVwiPiAoPGEgaHJlZj1cImh0dHBzOi8vYnJvd3Nl
ci5paHRzZG90b29scy5vcmcvXCI+U05PTUVEIENUPC9hPiMzOTU3OTAwMSk8L3NwYW4+PC90ZD48
L3RyPjwvdGFibGU+PHA+PGI+ZGVzY3JpcHRpb248L2I+OiBDaGFsbGVuZ2UgUHJvdG9jb2wuIFNl
dmVyZSByZWFjdGlvbiB0byBzdWJjdXRhbmVvdXMgY2FzaGV3IGV4dHJhY3QuIEVwaW5lcGhyaW5l
IGFkbWluaXN0ZXJlZDwvcD48cD48Yj5vbnNldDwvYj46IDIwMTItMDYtMTI8L3A+PHA+PGI+c2V2
ZXJpdHk8L2I+OiBzZXZlcmU8L3A+PHA+PGI+ZXhwb3N1cmVSb3V0ZTwvYj46IFN1YmN1dGFuZW91
cyByb3V0ZSA8c3BhbiBzdHlsZT1cImJhY2tncm91bmQ6IExpZ2h0R29sZGVuUm9kWWVsbG93OyBt
YXJnaW46IDRweDsgYm9yZGVyOiAxcHggc29saWQga2hha2lcIj4gKDxhIGhyZWY9XCJodHRwczov
L2Jyb3dzZXIuaWh0c2RvdG9vbHMub3JnL1wiPlNOT01FRCBDVDwvYT4jMzQyMDYwMDUpPC9zcGFu
PjwvcD48L2Jsb2NrcXVvdGU+PGJsb2NrcXVvdGU+PHA+PGI+cmVhY3Rpb248L2I+PC9wPjxoMz5N
YW5pZmVzdGF0aW9uczwvaDM+PHRhYmxlIGNsYXNzPVwiZ3JpZFwiPjx0cj48dGQ+LTwvdGQ+PHRk
PjxiPkNvbmNlcHQ8L2I+PC90ZD48L3RyPjx0cj48dGQ+KjwvdGQ+PHRkPlVydGljYXJpYSA8c3Bh
biBzdHlsZT1cImJhY2tncm91bmQ6IExpZ2h0R29sZGVuUm9kWWVsbG93OyBtYXJnaW46IDRweDsg
Ym9yZGVyOiAxcHggc29saWQga2hha2lcIj4gKDxhIGhyZWY9XCJodHRwczovL2Jyb3dzZXIuaWh0
c2RvdG9vbHMub3JnL1wiPlNOT01FRCBDVDwvYT4jNjQzMDUwMDEpPC9zcGFuPjwvdGQ+PC90cj48
L3RhYmxlPjxwPjxiPm9uc2V0PC9iPjogMjAwNDwvcD48cD48Yj5zZXZlcml0eTwvYj46IG1vZGVy
YXRlPC9wPjxwPjxiPm5vdGU8L2I+OiA8c3BhbiB0aXRsZT1cIiAgYW4gYWRkaXRpb25hbCBub3Rl
IGFib3V0IHRoZSByZWFjdGlvbiBieSB0aGUgcmVjb3JkZXIgIFwiPlRoZSBwYXRpZW50IHJlcG9y
dHMgdGhhdCB0aGUgb25zZXQgb2YgdXJ0aWNhcmlhIHdhcyB3aXRoaW4gMTUgbWludXRlcyBvZiBl
YXRpbmcgY2FzaGV3cy48L3NwYW4+PC9wPjwvYmxvY2txdW90ZT48L2Rpdj4iCiAgICAgIH0sCiAg
ICAgICJpZGVudGlmaWVyIjogWyB7CiAgICAgICAgInN5c3RlbSI6ICJodHRwOi8vYWNtZS5jb20v
aWRzL3BhdGllbnRzL3Jpc2tzIiwKICAgICAgICAidmFsdWUiOiAiNDk0NzY1MzQiCiAgICAgIH0g
XSwKICAgICAgImNsaW5pY2FsU3RhdHVzIjogewogICAgICAgICJjb2RpbmciOiBbIHsKICAgICAg
ICAgICJzeXN0ZW0iOiAiaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9hbGxl
cmd5aW50b2xlcmFuY2UtY2xpbmljYWwiLAogICAgICAgICAgImNvZGUiOiAiYWN0aXZlIiwKICAg
ICAgICAgICJkaXNwbGF5IjogIkFjdGl2ZSIKICAgICAgICB9IF0KICAgICAgfSwKICAgICAgInZl
cmlmaWNhdGlvblN0YXR1cyI6IHsKICAgICAgICAiY29kaW5nIjogWyB7CiAgICAgICAgICAic3lz
dGVtIjogImh0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vYWxsZXJneWludG9s
ZXJhbmNlLXZlcmlmaWNhdGlvbiIsCiAgICAgICAgICAiY29kZSI6ICJjb25maXJtZWQiLAogICAg
ICAgICAgImRpc3BsYXkiOiAiQ29uZmlybWVkIgogICAgICAgIH0gXQogICAgICB9LAogICAgICAi
cGF0aWVudCI6IHsKICAgICAgICAicmVmZXJlbmNlIjogIlBhdGllbnQvMTA3Mjc3OTQiCiAgICAg
IH0sCgkgImNyaXRpY2FsaXR5IiA6ICJIaWdoIiwKICAgICAgIm9uc2V0RGF0ZVRpbWUiOiAiMjAw
NCIsCiAgICAgICJyZWNvcmRlZERhdGUiOiAiMjAxNC0xMC0wOVQxNDo1ODowMCsxMTowMCIsCiAg
ICAgICJsYXN0T2NjdXJyZW5jZSI6ICIyMDEyLTA2IiwKICAgICAgIm5vdGUiOiBbIHsKICAgICAg
ICAidGV4dCI6ICJUaGUgY3JpdGljYWxpdHkgaXMgaGlnaCBiZWNhc3VlIG9mIHRoZSBvYnNlcnZl
ZCBhbmFwaHlsYWN0aWMgcmVhY3Rpb24gd2hlbiBjaGFsbGVuZ2VkIHdpdGggY2FzaGV3IGV4dHJh
Y3QuIgogICAgICB9IF0sCiAgICAgICJyZWFjdGlvbiI6IFsgewogICAgICAgICJzdWJzdGFuY2Ui
OiB7CiAgICAgICAgICAiY29kaW5nIjogWyB7CiAgICAgICAgICAgICJzeXN0ZW0iOiAiaHR0cDov
L3d3dy5ubG0ubmloLmdvdi9yZXNlYXJjaC91bWxzL3J4bm9ybSIsCiAgICAgICAgICAgICJjb2Rl
IjogIjExNjA1OTMiLAogICAgICAgICAgICAiZGlzcGxheSI6ICJjYXNoZXcgbnV0IGFsbGVyZ2Vu
aWMgZXh0cmFjdCBJbmplY3RhYmxlIFByb2R1Y3QiCiAgICAgICAgICB9IF0KICAgICAgICB9LAog
ICAgICAgICJkZXNjcmlwdGlvbiI6ICJDaGFsbGVuZ2UgUHJvdG9jb2wuIFNldmVyZSByZWFjdGlv
biB0byBzdWJjdXRhbmVvdXMgY2FzaGV3IGV4dHJhY3QuIEVwaW5lcGhyaW5lIGFkbWluaXN0ZXJl
ZCIsCiAgICAgICAgIm9uc2V0IjogIjIwMTItMDYtMTIiLAogICAgICAgICJzZXZlcml0eSI6ICJz
ZXZlcmUiLAogICAgICAgICJleHBvc3VyZVJvdXRlIjogewogICAgICAgICAgImNvZGluZyI6IFsg
ewogICAgICAgICAgICAic3lzdGVtIjogImh0dHA6Ly9zbm9tZWQuaW5mby9zY3QiLAogICAgICAg
ICAgICAiY29kZSI6ICIzNDIwNjAwNSIsCiAgICAgICAgICAgICJkaXNwbGF5IjogIlN1YmN1dGFu
ZW91cyByb3V0ZSIKICAgICAgICAgIH0gXQogICAgICAgIH0KICAgICAgfSwgewogICAgICAgICJv
bnNldCI6ICIyMDA0IiwKICAgICAgICAic2V2ZXJpdHkiOiAibW9kZXJhdGUiLAogICAgICAgICJu
b3RlIjogWyB7CiAgICAgICAgICAidGV4dCI6ICJUaGUgcGF0aWVudCByZXBvcnRzIHRoYXQgdGhl
IG9uc2V0IG9mIHVydGljYXJpYSB3YXMgd2l0aGluIDE1IG1pbnV0ZXMgb2YgZWF0aW5nIGNhc2hl
d3MuIgogICAgICAgIH0gXQogICAgICB9IF0KICAgIH0sCiAgICAic2VhcmNoIjogewogICAgICAi
bW9kZSI6ICJtYXRjaCIKICAgIH0KICB9IF0KfQ==</inboundTemplate>
        <outboundTemplate encoding="base64">TVNIfF5+XCZ8TUVTQV9PUHxYWVpfSE9TUElUQUx8aUZXfEFCQ19SQURJT0xPR1l8fHxPUk1eTzAx
fDEwMTEwNHxQfDIuM3x8fHx8fHx8ClBJRHwxfHwyMDg5MTMxMl5eXl5FUEl8fEFQUExFU0VFRF5K
T0hOXkFeXk1SLl58fDE5NjYxMjAxfE18fEFmckFtfDUwNSBTLiBIQU1JTFRPTiBBVkVeXk1BRElT
T05eV0leNTM1MDVeVVNeXl5ETiB8RE58KDYwOCkxMjMtNDU2N3woNjA4KTEyMy01Njc4fHxTfHwg
MTE0ODAwMDN8MTIzLTQ1LTc4OTB8fHx8Xl5eV0leXgpQRDF8fHxGQUNJTElUWShFQVNUKV5eMTIz
NDV8MTE3M15NQVRUSEVXU15KQU1FU15BXl5eClBWMXx8fF5eXkNBUkUgSEVBTFRIIFNZU1RFTVNe
Xl5eXnx8fCB8MTE3M15NQVRUSEVXU15KQU1FU15BXl5efHx8fHx8fHx8fHx8NjEwNjEzfHx8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxWCkFMMXx8fHx8fHx8fHx8fHx8fHx8fHx8fHwKT1JD
fE5XfDk4NzY1NF5FUElDfDc2NTQzXkVQQ3x8RmluYWx8fF5eXjIwMTQwNDE4MTcwMDE0Xl5eXnx8
MjAxNDA0MTgxNzMzMTR8MTE0OF5QQVRURVJTT05eSkFNRVNeXl5efHwxMTczXk1BVFRIRVdTXkpB
TUVTXkFeXl58MTEzM15eXjIyMl5eXl5efCg2MTgpMjIyLTExMjJ8fApPQlJ8MXwzNjM0NjNeRVBD
fDE4NTheRVBDfDczNjEwXlgtUkFZIEFOS0xFIDMrIFZXXl5eWC1SQVkgQU5LTEUgfHx8fHx8fHx8
fHx8MTE3M15NQVRUSEVXU15KQU1FU15BXl5efCg2MDgpMjU4LTg4NjZ8fHx8fHx8fEZpbmFsfHxe
Xl4yMDE0MDQxODE3MDAxNF5eXl58fHx8fDYwNjReTUFOU0ZJRUxEXkpFUkVNWV5eXl58fDExNDgw
MTBeMUFeRUFTVF5YLVJBWV5eXnxefApERzF8fEkxMHxTODJeQU5LTEUgRlJBQ1RVUkVeSTEwfEFO
S0xFIEZSQUNUVVJFfHw=</outboundTemplate>
        <inboundDataType>JSON</inboundDataType>
        <outboundDataType>HL7V2</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="3.9.1">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="3.9.1">
            <splitType>JavaScript</splitType>
            <batchScript/>
          </batchProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </outboundProperties>
      </responseTransformer>
      <filter version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.rulebuilder.RuleBuilderRule version="3.9.1">
            <name>Accept message if "$('OldPatient')" equals 1</name>
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <field>$('OldPatient')</field>
            <condition>EQUALS</condition>
            <values>
              <string>1</string>
            </values>
          </com.mirth.connect.plugins.rulebuilder.RuleBuilderRule>
          <com.mirth.connect.plugins.rulebuilder.RuleBuilderRule version="3.9.1">
            <name>Accept message if "msg['MSH']['MSH.9']['MSH.9.1'].toString()" equals "ORM"</name>
            <sequenceNumber>1</sequenceNumber>
            <enabled>true</enabled>
            <operator>AND</operator>
            <field>msg['MSH']['MSH.9']['MSH.9.1'].toString()</field>
            <condition>EQUALS</condition>
            <values>
              <string>"ORM"</string>
            </values>
          </com.mirth.connect.plugins.rulebuilder.RuleBuilderRule>
        </elements>
      </filter>
      <transportName>HTTP Sender</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
      <waitForPrevious>true</waitForPrevious>
    </connector>
    <connector version="3.9.1">
      <metaDataId>5</metaDataId>
      <name>Generating ORMs AL1</name>
      <properties class="com.mirth.connect.connectors.file.FileDispatcherProperties" version="3.9.1">
        <pluginProperties/>
        <destinationConnectorProperties version="3.9.1">
          <queueEnabled>false</queueEnabled>
          <sendFirst>false</sendFirst>
          <retryIntervalMillis>10000</retryIntervalMillis>
          <regenerateTemplate>false</regenerateTemplate>
          <retryCount>0</retryCount>
          <rotate>false</rotate>
          <includeFilterTransformer>false</includeFilterTransformer>
          <threadCount>1</threadCount>
          <threadAssignmentVariable/>
          <validateResponse>false</validateResponse>
          <resourceIds class="linked-hash-map">
            <entry>
              <string>Default Resource</string>
              <string>[Default Resource]</string>
            </entry>
          </resourceIds>
          <queueBufferSize>1000</queueBufferSize>
          <reattachAttachments>true</reattachAttachments>
        </destinationConnectorProperties>
        <scheme>FILE</scheme>
        <host>D:/Mirth_testing/Carter ADT ORM/ORM</host>
        <outputPattern>${message.channelName}_${SYSTIME}.HL7</outputPattern>
        <anonymous>true</anonymous>
        <username>anonymous</username>
        <password>anonymous</password>
        <timeout>10000</timeout>
        <keepConnectionOpen>true</keepConnectionOpen>
        <maxIdleTime>0</maxIdleTime>
        <secure>true</secure>
        <passive>true</passive>
        <validateConnection>true</validateConnection>
        <outputAppend>true</outputAppend>
        <errorOnExists>false</errorOnExists>
        <temporary>false</temporary>
        <binary>false</binary>
        <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
        <template>${message.encodedData}</template>
      </properties>
      <transformer version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.9.1">
            <name>AL1 Mapping</name>
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <script>tmp = msg;

tmp['AL1']['AL1.1']['AL1.1.1'] = '1';
tmp['AL1']['AL1.2']['AL1.2.1'] = "Category";
tmp['AL1']['AL1.3']['AL1.3.1'] = $('AL1_3');
tmp['AL1']['AL1.4']['AL1.4.1'] = $('AL1_4');
tmp['AL1']['AL1.5']['AL1.5.1'] = $('AL1_5');
tmp['AL1']['AL1.6']['AL1.6.1'] = $('AL1_6');</script>
          </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        </elements>
        <inboundTemplate encoding="base64">TVNIfF5+XCZ8TUVTQV9PUHxYWVpfSE9TUElUQUx8aUZXfEFCQ19SQURJT0xPR1l8fHxPUk1eTzAx
fDEwMTEwNHxQfDIuM3x8fHx8fHx8ClBJRHwxfHwyMDg5MTMxMl5eXl5FUEl8fEFQUExFU0VFRF5K
T0hOXkFeXk1SLl58fDE5NjYxMjAxfE18fEFmckFtfDUwNSBTLiBIQU1JTFRPTiBBVkVeXk1BRElT
T05eV0leNTM1MDVeVVNeXl5ETiB8RE58KDYwOCkxMjMtNDU2N3woNjA4KTEyMy01Njc4fHxTfHwg
MTE0ODAwMDN8MTIzLTQ1LTc4OTB8fHx8Xl5eV0leXgpQRDF8fHxGQUNJTElUWShFQVNUKV5eMTIz
NDV8MTE3M15NQVRUSEVXU15KQU1FU15BXl5eClBWMXx8fF5eXkNBUkUgSEVBTFRIIFNZU1RFTVNe
Xl5eXnx8fCB8MTE3M15NQVRUSEVXU15KQU1FU15BXl5efHx8fHx8fHx8fHx8NjEwNjEzfHx8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxWCkFMMXx8fHx8fHx8fHx8fHx8fHx8fHx8Ck9SQ3xO
V3w5ODc2NTReRVBJQ3w3NjU0M15FUEN8fEZpbmFsfHxeXl4yMDE0MDQxODE3MDAxNF5eXl58fDIw
MTQwNDE4MTczMzE0fDExNDheUEFUVEVSU09OXkpBTUVTXl5eXnx8MTE3M15NQVRUSEVXU15KQU1F
U15BXl5efDExMzNeXl4yMjJeXl5eXnwoNjE4KTIyMi0xMTIyfHwKT0JSfDF8MzYzNDYzXkVQQ3wx
ODU4XkVQQ3w3MzYxMF5YLVJBWSBBTktMRSAzKyBWV15eXlgtUkFZIEFOS0xFIHx8fHx8fHx8fHx8
fDExNzNeTUFUVEhFV1NeSkFNRVNeQV5eXnwoNjA4KTI1OC18fHx8fHx8fEZpbmFsfHxeXl4yMDE0
MDQxODE3MDAxNF5eXl58fHx8fDYwNjReTUFOU0ZJRUxEXkpFUkVNWV5eXl58fDExNDgwMTBeMUFe
RUFTVF5YLVJBWV5eXnxefApERzF8fEkxMHxTODJeQU5LTEUgRlJBQ1RVUkVeSTEwfEFOS0xFIEZS
QUNUVVJFfHw=</inboundTemplate>
        <outboundTemplate encoding="base64">TVNIfF5+XCZ8TUVTQV9PUHxYWVpfSE9TUElUQUx8aUZXfEFCQ19SQURJT0xPR1l8fHxPUk1eTzAx
fDEwMTEwNHxQfDIuM3x8fHx8fHx8ClBJRHwxfHwyMDg5MTMxMl5eXl5FUEl8fEFQUExFU0VFRF5K
T0hOXkFeXk1SLl58fDE5NjYxMjAxfE18fEFmckFtfDUwNSBTLiBIQU1JTFRPTiBBVkVeXk1BRElT
T05eV0leNTM1MDVeVVNeXl5ETiB8RE58KDYwOCkxMjMtNDU2N3woNjA4KTEyMy01Njc4fHxTfHwg
MTE0ODAwMDN8MTIzLTQ1LTc4OTB8fHx8Xl5eV0leXgpQRDF8fHxGQUNJTElUWShFQVNUKV5eMTIz
NDV8MTE3M15NQVRUSEVXU15KQU1FU15BXl5eClBWMXx8fF5eXkNBUkUgSEVBTFRIIFNZU1RFTVNe
Xl5eXnx8fCB8MTE3M15NQVRUSEVXU15KQU1FU15BXl5efHx8fHx8fHx8fHx8NjEwNjEzfHx8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxWCkFMMXx8fHx8fHx8fHx8fHx8fHx8fHx8Ck9SQ3xO
V3w5ODc2NTReRVBJQ3w3NjU0M15FUEN8fEZpbmFsfHxeXl4yMDE0MDQxODE3MDAxNF5eXl58fDIw
MTQwNDE4MTczMzE0fDExNDheUEFUVEVSU09OXkpBTUVTXl5eXnx8MTE3M15NQVRUSEVXU15KQU1F
U15BXl5efDExMzNeXl4yMjJeXl5eXnwoNjE4KTIyMi0xMTIyfHwKT0JSfDF8MzYzNDYzXkVQQ3wx
ODU4XkVQQ3w3MzYxMF5YLVJBWSBBTktMRSAzKyBWV15eXlgtUkFZIEFOS0xFIHx8fHx8fHx8fHx8
fDExNzNeTUFUVEhFV1NeSkFNRVNeQV5eXnwoNjA4KTI1OC18fHx8fHx8fEZpbmFsfHxeXl4yMDE0
MDQxODE3MDAxNF5eXl58fHx8fDYwNjReTUFOU0ZJRUxEXkpFUkVNWV5eXl58fDExNDgwMTBeMUFe
RUFTVF5YLVJBWV5eXnxefApERzF8fEkxMHxTODJeQU5LTEUgRlJBQ1RVUkVeSTEwfEFOS0xFIEZS
QUNUVVJFfHw=</outboundTemplate>
        <inboundDataType>HL7V2</inboundDataType>
        <outboundDataType>HL7V2</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </outboundProperties>
      </transformer>
      <responseTransformer version="3.9.1">
        <elements/>
        <inboundDataType>HL7V2</inboundDataType>
        <outboundDataType>HL7V2</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.9.1">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.9.1">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.9.1">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.9.1">
            <splitType>MSH_Segment</splitType>
            <batchScript/>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.9.1">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage/>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.9.1">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable/>
          </responseValidationProperties>
        </outboundProperties>
      </responseTransformer>
      <filter version="3.9.1">
        <elements>
          <com.mirth.connect.plugins.rulebuilder.RuleBuilderRule version="3.9.1">
            <name>Accept message if "msg['MSH']['MSH.9']['MSH.9.1'].toString()" is blank</name>
            <sequenceNumber>0</sequenceNumber>
            <enabled>true</enabled>
            <field>msg['MSH']['MSH.9']['MSH.9.1'].toString()</field>
            <condition>EQUALS</condition>
            <values>
              <string>"ORM"</string>
            </values>
          </com.mirth.connect.plugins.rulebuilder.RuleBuilderRule>
        </elements>
      </filter>
      <transportName>File Writer</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
      <waitForPrevious>true</waitForPrevious>
    </connector>
  </destinationConnectors>
  <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
  <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as "Postprocessor" in the response map
return;</postprocessingScript>
  <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
  <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
  <properties version="3.9.1">
    <clearGlobalChannelMap>true</clearGlobalChannelMap>
    <messageStorageMode>DEVELOPMENT</messageStorageMode>
    <encryptData>false</encryptData>
    <removeContentOnCompletion>false</removeContentOnCompletion>
    <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
    <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
    <initialState>STARTED</initialState>
    <storeAttachments>true</storeAttachments>
    <metaDataColumns>
      <metaDataColumn>
        <name>SOURCE</name>
        <type>STRING</type>
        <mappingName>mirth_source</mappingName>
      </metaDataColumn>
      <metaDataColumn>
        <name>TYPE</name>
        <type>STRING</type>
        <mappingName>mirth_type</mappingName>
      </metaDataColumn>
    </metaDataColumns>
    <attachmentProperties version="3.9.1">
      <type>None</type>
      <properties/>
    </attachmentProperties>
    <resourceIds class="linked-hash-map">
      <entry>
        <string>Default Resource</string>
        <string>[Default Resource]</string>
      </entry>
    </resourceIds>
  </properties>
  <exportData>
    <metadata>
      <enabled>true</enabled>
      <lastModified>
        <time>1686680788802</time>
        <timezone>Asia/Calcutta</timezone>
      </lastModified>
      <pruningSettings>
        <archiveEnabled>true</archiveEnabled>
      </pruningSettings>
    </metadata>
    <dependentIds/>
    <dependencyIds/>
    <channelTags/>
  </exportData>
</channel>
